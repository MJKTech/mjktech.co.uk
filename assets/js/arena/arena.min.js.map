{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utilities/makeEventDispatch.js","webpack:///./src/utilities/pLitr.js","webpack:///./src/utilities/Util.js","webpack:///./src/utilities/browsxr.js","webpack:///./src/arena.js","webpack:///./src/core/scope.js","webpack:///./src/core/provider.js","webpack:///./src/core/compiler.js","webpack:///./src/utilities/Cookie.js","webpack:///./src/utilities/provisionaryPromise.js","webpack:///./src/utilities/ViewportMonitor.js","webpack:///./src/utilities/ScrollMonitor.js","webpack:///./src/utilities/BreakpointMonitor.js","webpack:///./src/utilities/TransitionMonitor.js","webpack:///./src/utilities/GestureMonitor.js","webpack:///./src/utilities/viewUpdater.js","webpack:///./src/utilities/loadImgSrc.js","webpack:///./src/core/providers/routerService.js","webpack:///./src/core/providers/controllerDirective.js","webpack:///./src/core/providers/mainViewDirective.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","MakeEventDispatch","owner","dispatch","listeners","$on","type","callback","push","$off","$once","removeListener","apply","this","arguments","stack","index","indexOf","splice","$trigger","event","_list","_event","slice","target","preventDefault","__eventStopped__","length","$destroyDispatch","forEach","define","PLitr","resolver","resultGetter","promiseChain","buildChain","onsuccess","onfailure","prevChain","processResult","result","reject","then","catch","data","err","setResult","callbackRunner","successCallback","failCallback","ex","undefined","setSuccess","success","setError","fail","resolveCallback","resolve","all","promises","len","count","decrement","waitFor","window","Promise","browsxr","caf","lastFrameTime","raf","util","utils","require","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","cb","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","webkitCancelRequestAnimationFrame","mozCancelRequestAnimationFrame","clearTimeout","isUndefined","val","isDefined","isFunction","isObject","isString","isNumber","isArray","Array","arrayDiff","A","B","filter","x","objectAssign","assign","output","source","k","copyObject","obj","deleteObjProp","prop","objectToArray","arr","objectLength","keys","objectKeys","toCamelCalse","input","delimiters","regX","RegExp","toLowerCase","replace","match","group1","toUpperCase","camelCaseTo","str","op","generateHash","useNumbers","text","characters","rl","charAt","floor","random","randomNumber","min","preventEvent","e","stopImmediate","allowPropagation","stopPropagation","stopImmediatePropagation","debounce","fn","delay","range","timer","context","args","addCSSRule","selector","rules","sheet","document","styleSheets","cssRules","insertRule","addRule","updatePageTitle","title","getElementsByTagName","innerHTML","Exception","addNavigatorDataToHtml","documentElement","setAttribute","navigator","userAgent","platform","addJSClass","h","className","trim","getInnerVH","innerHeight","clientHeight","screen","height","outerHeight","setInnerVHVar","vhVarName","style","setProperty","toggleOverflow","classn","tog","el","_hiding","$","off","on","IOS","ua","documentComputedStyle","b","body","getComputedStyle","lastAnimationFrame","cookiesEnabled","cookieEnabled","IE","test","parseFloat","appVersion","split","historyAPI","history","pushState","Chrome","Webkit","Opera","Mobile","mediaQueries","Modernizr","mq","touch","backgroundSizing","prefix","pre","join","OLink","dom","lowercase","css","js","substr","placeholders","createElement","supports","supportsSvgImg","implementation","hasFeature","transitions","start","end","animations","ct","ttc","$win","$doc","$html","defaultConfig","html5Mode","autoBootstrap","rootElementSelector","defaultTransitionSpeed","Scope","Provider","Compiler","Util","components","directive","controller","service","Arena","_config_","a","rootScope","startupPromises","$config","$provider","$compiler","$directive","$controller","$service","alias","storage","storageId","storageName","setItem","getItem","$bootstrapDefer","concat","$bootstrap","$rootElement","eq","compileDOM","bootstrapResolutions","compile","$viewportMonitor","ViewportMonitor","$scrollMonitor","ScrollMonitor","$breakpointMonitor","BreakpointMonitor","mobile","desktop","ready","$browser","$cookie","provisionaryPromise","TransitionMonitor","GestureMonitor","viewUpdater","loadImgSrc","providerName","Error","utilName","ARENA","jQuery","makeEventDispatch","parent","scope","$children","toString","$id","$parent","$create","isolate","newScope","S","$root","$destroy","siblings","$$watchers","$destroyed","$emit","__propagationStopped__","childScope","$broadcast","DIRECTIVE_SUFFIX","CONTROLLER_SUFFIX","_components_","provider","providers","cache","$$directiveSelectors","getDependencies","f","locals","$dependencies","params","map","checkSecurity","directiveName","providr","cached","invoke","link","controllerName","instantiate","$cache","constructor","C","construct","extendFn","hasAlias","_type_","originalDirective","componentName","compilerId","DirectiveTester","nameSanitized","nameDashed","tests","idTest","getAttribute","nodeName","hasAttribute","tagName","getCompilerData","setCompilerData","compiler","testCache","findDirectives","directiveList","tester","linkToElement","terminal","autoCompile","parentScope","getScope","element","parentNode","existingScope","existingDirectives","matchingDirectives","compilingThisElement","directivesRequireScope","directivesRequireIsolatedScope","directives","requiresIsolateScope","compileDefer","wrappedEl","elementData","endCompileNode","removeClass","triggerHandler","addClass","$deferCompile","promise","directiveController","directiveData","$scope","console","error","childNodes","child","Zepto","set","cookieName","cookieValue","lifeInDays","path","domain","secure","expiryDate","today","setTime","cookie","escape","toGMTString","u","cookieArray","decodeURI","testName","timeToWait","interval","testRunner","frequency","timeout","clearInterval","setInterval","passingResult","$window","viewportDimensions","monitorDispatch","WINDOW_RESIZE_EVENT","updateviewportDimensions","winWidth","innerWidth","clientWidth","winHeight","prvWidth","prvHeight","width","resizeEvent","updateListners","destroy","$htmlBody","ids","updateWindowDimensions","ElementTracker","scrollMonitor","thresholdX","thresholdY","et","getBoundingClientRect","checkPosition","rect","ofsX","offsetHeight","offsetWidth","ofsY","state","topInBounds","top","bottomInBounds","bottom","rightInBounds","right","leftInBounds","left","xCovered","yCovered","xVisible","yVisible","triggerEvents","scrollEvent","unMonitor","monitoredElement","$el","bindingsMap","updateScrollData","prvPosition","position","scrollTop","scrollDirection","scrollData","binding","tracker","unbind","topInView","bottomInView","rightInView","leftInView","isInView","originalEvent","newState","wasVisible","isVisible","createEvent","eventType","edge","inBoundsProp","inViewProp","edgeIsVisbible","getOffset","offset","scrollTo","speed","before","after","sp","_o","jquery","animate","done","testThreshold","breakpoints","operator","breakpointName","w","lastBreakpointClassString","resizeHandler","newBreakpoint","oldBreakpoint","currentBreakpoint","$element","breakpoint","classes","annotateElement","refresh","TRANSITIONEVENT","ANIMATIONEVENT","options","tm","tmEvnt","isElement","srcElement","originalTarget","triggerTS","triggerTE","triggerAS","triggerAE","maxDuration","manipulate","toggleClass","manipulation","ended","resolvePromise","msPointerEnabled","msEventType","TOUCHEVENTS","pointerEnabled","touchstart","touchend","touchmove","OPTIONS","swipeThreshold","tapThreshold","dbltapThreshold","tapPrecision","justTouchEvents","getPointerEvent","targetTouches","newTimestamp","setListener","elm","events","eventsArray","addEventListener","opt","currX","currY","cachedX","cachedY","tapTimer","timestamp","tapNum","sendEvent","eventName","y","distance","trigger","pointer","pageX","pageY","eventsArr","deltaY","deltaX","abs","$app","$target","updateTarget","request","monitor","useCssTransitions","cssTransitions","transitionInClass","targetLoadingClass","transitionOutClass","hasClass","htmlUpdate","httpSuccess","response","$replacement","targetHtml","insertBefore","remove","$targetScope","loadingClass","endUpdate","httpError","status","url","errorPage","targetElement","mainView","redirectedUrl","alert","onServerError","http","src","image","Image","onload","onerror","complete","naturalWidth","routerProvider","RouterService","router","_blacklist_","base","isInternalRoute","substring","isValidRoute","blacklist","paths","evalHtmlResponse","html","targetSelector","skipSanitization","sanitizedHtml","sanitize","String","getDocumentHtml","metaData","find","getDocumentMeta","scripts","navigate","location","href","ajax","method","headers","textStatus","jqXHR","errorThrown","changeAppRoute","dataEval","controllerDirective","controllerAs","contoller","mainViewDirective","$router","ROOT_VIEW","ACTIVE_VIEWS","linkSelector","linkFilter","requestMethod","requestHeaders","confirm","buildStateObject","$$ARENA","requestData","handleClicks","$this","clickData","which","metaKey","is","attr","ajaxHref","pathname","ajaxRequestCallback","handleStateChange","targetView","search","triggerElement","replaceState","setInitialState"],"mappings":"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","file":"arena.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","/** \n * @class viewportMonitor\n * @description Create an event dispatcher, or turn an existing object into one.\n * \n * @example\n \t\t`var dispatch = new MakeEventDispatch();\t\t// Born with event superpowers\n\t\t var mySingleton = new SomeClass();\n\t\t MakeEventDispatch(mySingleton);\t\t\t\t// Enhanced with event superpowers`\n *\n * @method $on Listen for event\n    `var stopFn = dispatch.$on(\"eventName\", function callbackFn(event){ ... })\n     stopFn()\t\t\t\\\\Stop listening for event`\n *\n * @method $once Listen for event and fire callback once. Repeats if callback returns true;\n    `var stopFn = dispatch.$once(\"eventName\", function callbackFn(event){ return $onceAgainBoolean })\n     stopFn()\t\t\t\\\\Stop listening for event`\n * \n * @method $off Alternative way to stop listening\n    `dispatch.$off(\"eventName\", callbackFn)`\n * \n * @method $trigger Trigger an event using event object\n \t\t`var event = {type: \"eventName\", someEventData: \"xxx\"}; \n\t\t dispatch.$trigger(event);`\n * or:\n * @method $trigger Trigger an event using event name\n \t\t`dispatch.$trigger(\"eventName\");`\n * \n * @method $destroyDispatch Remove all listeners and destroy the dispatch capabilities\n \t\t`dispatch.$destroyDispatch();`\n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n */\n\nfunction MakeEventDispatch(owner) {\n\tvar dispatch = owner || {},\n\t\tlisteners = {};\n\n\tdispatch.$on = function (type, callback) {\n\t\tif(!(type in listeners)) listeners[type] = [];\n\t\tlisteners[type].push(callback);\n\t\treturn function() { dispatch.$off(type, callback); };\n\t};\n\n\tdispatch.$once = function (type, callback) {\n\t\tvar removeListener,\n\t\t\tcallbackOnceThen$off = function () {\n\t\t\t\tremoveListener();\n\t\t\t\tcallback.apply(this, arguments);\n\t\t\t};\n\t\tremoveListener = dispatch.$on(type, callbackOnceThen$off);\n\t\treturn removeListener;\n\t};\n\n\tdispatch.$off = function (type, callback) {\n\t\tif(!(type in listeners)) return dispatch; \n\t\tvar stack = listeners[type],\n\t\t\tindex = stack.indexOf(callback);\n\t\tif (index > -1) stack.splice(index, 1);\n\t\treturn dispatch;\n\t};\n\n\tdispatch.$trigger = function (event) {\n\t\tvar _event = (typeof event === \"string\")? {type: event} : event,\n\t\t\t_list;\n\n\t\tif(!(_event.type in listeners)) return dispatch;\n\t\telse _list = listeners[_event.type].slice();\n\n\t\t_event.target = dispatch;\n\t\tif (!_event.preventDefault)\n\t\t\t_event.preventDefault = function () { _event.__eventStopped__ = true; };\n\n\t\tfor(var i = 0, l = _list.length; i < l && _event.__eventStopped__ !== true; i++) {\n\t\t\t_list[i].call(dispatch, _event);\n\t\t}\n\t\treturn dispatch;\n\t};\n\t\n\tdispatch.$destroyDispatch = function () {\n\t\tdispatch.$trigger(\"$destroyDispatch\");\n\t\tfor (var type in listeners) {\n\t\t\tlisteners[type].forEach(function (callback) { dispatch.$off(type, callback); });\n\t\t}\n\t\tdispatch.$on = dispatch.$trigger = function () {};\n\t\tlisteners = null;\n\t};\n\n\treturn dispatch;\n}\n\nif (typeof module !== 'undefined' && module.exports) module.exports = MakeEventDispatch;\nif (typeof define == 'function' && define.amd) define(function(){ return MakeEventDispatch; });","/** \n * @description: Stripped down ES6 compatible promises.\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\n * @example: \n\t\t`new Promise(function(resolve, reject){ ... } )\n\t\t\t\t\t.then(function(result){ ... })\n\t\t\t\t\t.catch(function(error){ ... });`\n * @see: Chris Davies https://github.com/chrisdavies/plite\n */\n\nfunction PLitr(resolver) {\n  var promiseChain = function () {},\n      resultGetter;\n\n  function buildChain(onsuccess, onfailure) {\n    var prevChain = promiseChain;\n    promiseChain = function () {\n      prevChain();\n      resultGetter(onsuccess, onfailure);\n    };\n\t}\n\t\n  function processResult(result, callback, reject) {\n    if (result && result.then && result.catch) {\n      result.then(function (data) { processResult(data, callback, reject) })\n\t\t\t\t\t\t.catch(function (err) { processResult(err, reject, reject) });\n    } else {\n      callback(result);\n\t\t}\n\t}\n\t\n  function setResult(callbackRunner) {\n    resultGetter = function (successCallback, failCallback) {\n      try {\n        callbackRunner(successCallback, failCallback);\n      } catch (ex) {\n        failCallback(ex);\n      }\n    };\n    promiseChain();\n    promiseChain = undefined;\n\t}\n\t\n  function setSuccess(data) {\n    setResult(function (success) { success(data) });\n  }\n  function setError(err) {\n    setResult(function (success, fail) { fail(err) });\n  }\n\n\tvar p = {\n\t\tthen: function (callback) {\n\t\t\tvar resolveCallback = resultGetter || buildChain;\n\t\t\treturn PLitr(function (resolve, reject) {\n\t\t\t\tresolveCallback(function (data) { resolve(callback(data)) }, reject);\n\t\t\t});\n\t\t},\n\t\tcatch: function (callback) {\n\t\t\tvar resolveCallback = resultGetter || buildChain;\n\t\t\treturn PLitr(function (resolve, reject) {\n\t\t\t\tresolveCallback(resolve, function (err) { reject(callback(err)) });\n\t\t\t});\n\t\t},\n\t\tresolve: function (result) {\n\t\t\t!resultGetter && processResult(result, setSuccess, setError);\n\t\t},\n\t\treject: function (err) {\n\t\t\t!resultGetter && processResult(err, setError, setError);\n\t\t}\n\t};\n\n  resolver && resolver(p.resolve, p.reject);\n  return p;\n}\n\nPLitr.all = function (promises) {\n\tpromises = promises || [];\n\treturn PLitr(function (resolve, reject) {\n\t\tvar len = promises.length,\n\t\t\t\tcount = len;\n\t\tif(!len) return resolve();\n\n\t\tfunction decrement() { --count <= 0 && resolve(promises); }\n\n\t\tfunction waitFor(p, i) {\n\t\t\tif (p && p.then)\n\t\t\t\tp.then(function (result) {\n\t\t\t\t\tpromises[i] = result;\n\t\t\t\t\tdecrement();\n\t\t\t\t}).catch(reject);\n\t\t\telse\n\t\t\t\tdecrement();\n\t\t}\n\n\t\tfor (var i = 0; i < len; ++i) waitFor(promises[i], i);\n\t});\n};\n\nif (typeof module !== 'undefined' && module.exports) module.exports = window.Promise || PLitr;\nelse if (typeof define == 'function' && define.amd) define(function(){ return window.Promise || PLitr });","/** \n * @class util.js\n * @description Collection of useful isht\n *\n * @requires browsxr\n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n * @version: 0.1.2\n */\n\nvar utils = (function (browsxr) {\n\tvar util = {requestAnimationFrame: getRaf(), cancelAnimationFrame: getCaf()};\n\t\n\tutil.isUndefined = function(val) {return typeof val === 'undefined'; };\n\tutil.isDefined = function(val) { return !util.isUndefined(val); };\n\tutil.isFunction = function(val) { return typeof val === 'function'; };\n\tutil.isObject = function(val) { return val !== null && typeof val === 'object'; };\n\tutil.isString = function(val) { return typeof val === 'string'; };\n\tutil.isNumber = function(val) { return typeof val === 'number'; };\n\tutil.isArray = Array.isArray;\n\t\n\tutil.arrayDiff = function (A, B) { return A.filter(function (x) { return B.indexOf(x) < 0; }); };\n\t\n\tutil.objectAssign = Object.assign || function (target) {\n\t\tvar output = Object(target);\n\t\tfor (var i = 1, l = arguments.length; i < l; i++) {\n\t\t\tvar source = arguments[i];\n\t\t\tif (source !== undefined && source !== null) {\n\t\t\t\tfor (var k in source) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(source, k))\n\t\t\t\t\t\toutput[k] = source[k];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t};\n\tutil.copyObject = function(obj) { return util.objectAssign({}, obj); };\n\tutil.deleteObjProp = function(obj, prop) {\n\t\ttry{ delete obj[prop]; }\n\t\tfinally{ if(obj[prop]) obj[prop]=null; }\n\t\treturn obj;\n\t};\n\tutil.objectToArray = function(obj, arr) {\n\t\tif(obj instanceof Array) return obj;\n\t\tarr = arr || [];\n\t\tfor(var prop in obj) arr.push(obj[prop]);\n\t\treturn arr;\n\t};\n\tutil.objectLength = function (obj) {\n\t\tif(typeof Object.keys == \"function\") return Object.keys(obj).length;\n\t\tvar count = 0;\n\t\tfor(var i in obj)\n\t\t\tif(obj && obj.hasOwnProperty && obj.hasOwnProperty(i)) count++; \n\t\treturn count;\n\t};\n\tutil.objectKeys = function (obj) {\n    var keys = [];\n    for (var key in obj) if (obj.hasOwnProperty(key)) keys.push(key);\n    return keys;\n  };\n\t\n\tutil.toCamelCalse = function(input, delimiters) { \n\t\tvar regX = new RegExp('['+(delimiters? delimiters:'-._') + '](.)', 'g');\n\t\treturn input.toLowerCase().replace(regX, function(match, group1){ return group1.toUpperCase(); });\n\t};\n\tutil.camelCaseTo = function (str, op) {\n\t\treturn str.replace(/([a-z])([A-Z])/g, '$1'+(op||'-')+'$2').toLowerCase();\n\t};\n\t\n\tutil.generateHash = function (length, useNumbers) {\n\t\tvar text = \"\", characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\n\t\tif(useNumbers) characters += \"0123456789\";\n\t\tfor( var i=0, rl=length||5, l=characters.length; i < rl; i++ )\n\t\t\ttext += characters.charAt(Math.floor(Math.random() * l));\n\t\treturn text;\n\t};\n\t\n\tutil.randomNumber = function (max, min) {\n\t\tif (util.isUndefined(max)) max = 1;\n\t\tif (util.isUndefined(min)) min = 0;\n\t\treturn Math.floor(Math.random() * (max - min + 1)) + min;\n\t};\n\t\n\tutil.preventEvent = function (e, stopImmediate, allowPropagation) { \t// Block event and bubbling\n\t\tif(!e) return false;\n\t\tif(e.preventDefault) e.preventDefault();\n\t\tif(e.stopPropagation && !allowPropagation) e.stopPropagation();\n\t\tif (stopImmediate && e.stopImmediatePropagation) e.stopImmediatePropagation();\n\t\treturn e;\n\t};\n\t\n\tutil.debounce = function (fn, delay, range) {\n\t\tvar timer = null;\n\t\tif(!delay) delay = 10;\n\t\tif(typeof range == \"number\") delay += util.randomNumber(range, Math.random()<0.5);\n\t\treturn function(){\n\t\t\tvar context = this, args = arguments;\n\t\t\tclearTimeout(timer);\n\t\t\ttimer = setTimeout(function(){ fn.apply(context, args); }, delay);\n\t\t};\n\t};\n\t\n\tutil.addCSSRule = function (selector, rules, index, sheet) {\n\t\ttry{\n\t\t\tif(typeof sheet==\"number\") sheet = document.styleSheets[sheet];\n\t\t\telse if(sheet === undefined) sheet = document.styleSheets[document.styleSheets.length - 1];\n\t\t\tif(typeof index!==\"number\") index = sheet.cssRules.length;\n\t\t\tif(\"insertRule\" in sheet) sheet.insertRule(selector + \"{\" + rules + \"}\", index);\n\t\t\telse if(\"addRule\" in sheet) sheet.addRule(selector, rules, index);\n\t\t} catch (e) {}\n\t};\n\t\n\tutil.updatePageTitle = function (title) {\n\t\ttry {\n\t\t\tvar t = title.replace('<','&lt;').replace('>','&gt;').replace(' & ',' &amp; ');\n\t\t\tdocument.getElementsByTagName('title')[0].innerHTML = t;\n\t\t} catch ( Exception ) { }\n\t\tdocument.title = title;\n\t};\n\t\n\t/** addNavigatorDataToHtml\n\t *  @desciption adds window.navigator data to document element as attributes\n\t *  @example: (target chrome13 on windows in css) \n\t *\t\thtml[data-useragent*='Chrome/13.0'][data-platform='Win32'] hits chrome13 on windows\n\t */\n\tutil.addNavigatorDataToHtml = function () {\n\t\tdocument.documentElement.setAttribute('data-useragent', navigator.userAgent);\n\t\tdocument.documentElement.setAttribute('data-platform', navigator.platform);\n\t};\n\n\t/** addJSClass\n\t *  @desciption Adds \"js\" class name to element or document while removing \"no-js\" class\n\t */\n\tutil.addJSClass = function (e) { \n\t\tvar h = e||document.documentElement; \n\t\th.className = ('js '+h.className.replace('no-js','')).trim(); \n\t}\n\n\t/* Damn you mobile browser address bar -__- */\n\tutil.getInnerVH = function () {\t\n\t\treturn Math.min(window.innerHeight, document.documentElement.clientHeight, window.screen?window.screen.height:window.outerHeight);\n\t}\n\tutil.setInnerVHVar = function (vhVarName) {\t\n\t\tdocument.documentElement.style.setProperty(vhVarName||'--vh100', `${util.getInnerVH()}px`);\n\t}\n\t\n\t/** The following depend on jQuery or a compatible replacement availble as `$`\n\t */\n\tutil.toggleOverflow = (function (classn) {\n\t\tfunction tog(el, _hiding){\n\t\t\treturn $(el)[_hiding===undefined? \"toggleClass\" : (_hiding? \"addClass\":\"removeClass\")](classn);\n\t\t}\n\t\ttog.off = function (l) { return tog(l, true) };\n\t\ttog.on = function (l) { return tog(l, false) };\n\t\tutil.addCSSRule(\".\"+classn, \"overflow:hidden !important\");\n\t\tif(browsxr.IOS) util.addCSSRule(\"html.\"+classn+\",body.\"+classn, \"position:relative !important\");\n\t\treturn tog;\n\t})(\"toggleOverflowClass_overflow-on\");\n\n\treturn util;\n})(require(\"./browsxr.js\"));\n\nfunction getRaf() {\n\tvar lastFrameTime = 0;\n\tvar raf = window.requestAnimationFrame\n\t\t|| window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame\n\t\t|| function (callback) {\n\t\t\t\tvar currTime = new Date().getTime();\n\t\t\t\tvar timeToCall = Math.max(0, 16 - (currTime - lastFrameTime));\n\t\t\t\tvar id = window.setTimeout(function() { callback(currTime + timeToCall) }, timeToCall);\n\t\t\t\tlastFrameTime = currTime + timeToCall;\n\t\t\t\treturn id;\n\t\t};\n\treturn function (cb) { return raf.call(window, cb) }\n}\nfunction getCaf() {\n\tvar caf = window.cancelAnimationFrame\n\t\t\t|| window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame\n\t\t\t|| window.webkitCancelRequestAnimationFrame || window.mozCancelRequestAnimationFrame\n\t\t\t|| function (id) { clearTimeout(id); }\n\treturn function (id) { return caf.call(window, id) }\n}\n\nif (typeof module !== 'undefined' && module.exports) module.exports = utils;\nelse if (typeof define == 'function' && define.amd) define(function(){ return utils; });","/** browsxr.js:  \n * @description object containing some useful info about the browser\n * @example\n\t\t browser.cookiesEnabled @Returns true if cookies are available\n\t\t browser.IE = @Returns a negative value if the browser is not IE or the version number\n\t\t browser.prefix @Returns prefix strings used by the browser\t\t \n\t\t browser.requestAnimationFrame @Returns window.requestAnimationFrame or polyfill\n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n * @version: 1.0\n */\n\nvar browsxr = (function (){\n\tvar d = document.documentElement \n\t\t, ua = navigator.userAgent \n\t\t, s = document.body.style\n\t\t, documentComputedStyle = window.getComputedStyle? window.getComputedStyle(d) : [];\n\t\n\tvar b = {\n\t\tlastAnimationFrame: 0\n\t};\n\t\n\tb.cookiesEnabled = navigator.cookieEnabled;\n\tb.IE = (/msie/i.test(ua) && parseFloat)? parseFloat(navigator.appVersion.split(\"MSIE\")[1]) : 0;\n\tb.historyAPI = !!(window.history && history.pushState);\n\tb.Chrome = (!b.IE && /Chrome/i.test(ua));\t\t\t\t\t\t// Not reliable\n\tb.Webkit = (!b.IE && (b.Chrome || /Safari/.test(ua)));\n\tb.Opera = (!b.IE && !b.Webkit && /opera/i.test(ua));\n\tb.IOS = ua.match(/(iPad|iPhone|iPod)/i) || false;\n\tb.Mobile = (Array.prototype.indexOf && (\" \" + d.className + \" \").replace(/[\\n\\t]/g, \" \").indexOf(\"mobile-browser\") > -1);\n\tb.mediaQueries = !window.Modernizr? 0 : (Modernizr.mq('only all'))? 1 : -1;\t// Depends on Modernizr\n\tb.touch = 'ontouchstart' in document.body;\n\tb.backgroundSizing = !!('backgroundSize' in d.style);\n\tb.prefix = (function(){\n\t\tif (documentComputedStyle.length) {\n\t\t\tvar pre = ( \n\t\t\t\t\t\tArray.prototype.slice.call(documentComputedStyle).join('').match(/-(moz|webkit|ms|khtml)-/) \n\t\t\t\t\t\t|| (documentComputedStyle.OLink === '' && ['', 'o']) \n\t\t\t\t\t)[1]\n\t\t\t\t, dom = ('WebKit|Moz|MS|O|Khtml').match(new RegExp('(' + pre + ')', 'i'))[1];\n\t\t\treturn { dom: dom, lowercase: pre, css: '-' + pre + '-', js: pre[0].toUpperCase() + pre.substr(1) };\n\t\t} else {\n\t\t\treturn { dom: 'MS', lowercase: 'ms', css: '-ms-', js: 'Ms' };\n\t\t}\n\t})();\n\tb.placeholders = ('placeholder' in document.createElement('input'));\n\tb.supports = function(prop){\n\t\tif(prop in documentComputedStyle) return prop;\n\t\tprop = prop.replace(/^[a-z]/, function(val){ return val.toUpperCase(); });\n\t\tif(b.prefix.js + prop in s) return b.prefix.lowercase + prop;\n\t\treturn false;\n\t};\n\tb.supportsSvgImg = document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#Image\", \"1.1\");\n\tb.transitions = b.supports('transition');\n\tif(b.transitions) b.transitions = {\n\t\tstart: (b.transitions==='transition'? 'transitionstart' : b.transitions+'Start'),\n\t\tend: (b.transitions==='transition'? 'transitionend' : b.transitions+'End')\n\t}\n\tb.animations = b.supports('animation');\n\tif(b.animations) b.animations = {\n\t\tstart: (b.animations==='animation'? 'animationstart' : b.animations+'Start'),\n\t\tend: (b.animations==='animation'? 'animationend' : b.animations+'End')\n\t}\n\tb.requestAnimationFrame = window.requestAnimationFrame\n\t\t|| window[b.prefix.lowercase+'RequestAnimationFrame']\n\t\t|| function(callback) {\n\t\t\t\tvar ct = new Date().getTime(), ttc = Math.max(0, 16 - (ct - b.lastAnimationFrame));\n\t\t\t\tb.lastAnimationFrame = ct + ttc;\n\t\t\t\treturn window.setTimeout(function(){ callback(ct + ttc); }, ttc);\n\t\t\t};\n\n\treturn b;\n})();\n\nif (typeof module !== 'undefined' && module.exports) module.exports = browsxr;\nelse if (typeof define == 'function' && define.amd) define(function(){ return browsxr; });","/** \n * @global ARENA\n * @description \n * \t\tThe ArenaJs front-end framework is a toolbox that evolved to help develop a website as \n * \t\ta single-page-app.\n * \t\tUsing the principle of progressive enhancement, unobtrusive JavaScript can be used \n * \t\tto quickly augment a functional MVP and apply more advanced, non-essential features as the \n * \t\tenvironment permits, in a non-pollutive way. \n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n * @license: Apache-2.0\n * @version: 0.5.5\n * @requires jQuery\n */\n\n/** \n * @fires $app#$bootstrapStart\n *\t\t- When bootstrapping of app begins (after loading promises resolve but before DOM is $compiled).\n *\t\t  The bootstrap events can be used to coordinate configuration of components.\n *\t\t  During the bootstrapping process, $app.$bootstrap === false.\n * @fires $app#$bootstrapEnd\n * \t\t- When bootstrapping of app ends (just after DOM is $compiled).\n *\t\t  After the bootstrap process has ended, $app.$bootstrap === true.\n *\n * @example \n\t\t`<html>\n\t\t<head />\n\t\t<body main-view=\"main\">\n\t\t\t<header />\n\t\t\t\n\t\t\t<main> \n\t\t\t\t<!-- Your page content updated using xhr (ajax) requests: -->\n\t\t\t\t<button data-change-colour-to=\"blue\">Change blue!</button>\n\t\t\t\t<button change-colour-to>Change black!</button>\n\t\t\t</main>\n\t\t\t\n\t\t\t<footer />\n\t\t\t\n\t\t\t<!--[if lt IE 9]> <script src=\"polyfills.js\"></script> <![endif]-->\n\t\t\t<script src=\"jquery.js\"></script>\n\t\t\t<script src=\"arena.js\"></script>\n\t\t\t<script>\n\t\t\t\tvar yourApp = new ARENA(\"yourAppName\");\n\t\t\t\tyourApp.$directive(\"changeColourTo\", function () {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tscope: true,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tchangeColourTo: 'black'\t//<- default value\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlink: function ($element, scope, data) {\n\t\t\t\t\t\t\t$element.on('click', function () {\n\t\t\t\t\t\t\t\tthis.style.backgroundColor = data.changeColourTo;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tscope.$on(\"$destroy\", function (e) {\n\t\t\t\t\t\t\t\t$element.off('click');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tyourApp.$on(\"$bootstrapEnd\", function (event) {\n\t\t\t\t\t$('body').addClass('page-ready');\n\t\t\t\t});\n\t\t\t</script>\n\t\t</body>\n\t\t</html>`\n *\n */\n\n(function ($, undefined) {\n  'use strict';\n\t\n\tvar $win = $(window),\n\t\t$doc = $(document),\n\t\t$html = $(document.documentElement),\n\t\tdefaultConfig = {\n\t\t\thtml5Mode: true,\t\t\t\t\t// Will be ignored if html5 history api missing\n\t\t\tautoBootstrap: true,\t\t\t\t// Bootstrap automatically (use $app.$bootstrap() elsewise)\n\t\t\trootElementSelector: 'html',\t\t// Bind app to this DOM element\n\t\t\tdefaultTransitionSpeed: 300\t\t\t// Transitions will take this long by default\n\t\t};\n\t\n\tvar Scope = require(\"./core/scope.js\"),\n\t\tProvider = require(\"./core/provider.js\"),\n\t\tCompiler = require(\"./core/compiler.js\"),\n\t\tUtil = require(\"./utilities/Util.js\"),\n\t\tcomponents = {directive: {}, controller: {}, service: {}};\n\t\n\tUtil.$ = $;\n\tUtil.$browser = require(\"./utilities/browsxr.js\");\n\tUtil.$cookie = require(\"./utilities/Cookie.js\");\n\tUtil.Promise = require(\"./utilities/pLitr.js\");\n\tUtil.provisionaryPromise = require(\"./utilities/provisionaryPromise.js\");\n\tUtil.MakeEventDispatch = require(\"./utilities/makeEventDispatch.js\");\n\tUtil.ViewportMonitor = require(\"./utilities/ViewportMonitor.js\");\n\tUtil.ScrollMonitor = require(\"./utilities/ScrollMonitor.js\");\n\tUtil.BreakpointMonitor = require(\"./utilities/BreakpointMonitor.js\");\n\tUtil.TransitionMonitor = require(\"./utilities/TransitionMonitor.js\");\n\tUtil.GestureMonitor = require(\"./utilities/GestureMonitor.js\");\n\tUtil.viewUpdater = require(\"./utilities/viewUpdater.js\");\n\tUtil.loadImgSrc = require(\"./utilities/loadImgSrc.js\");\n\tUtil.addNavigatorDataToHtml();\n\tUtil.addJSClass();\n\t\n\tfunction Arena(_config_) {\n\t\tvar a = new Util.MakeEventDispatch(this),\n\t\t\trootScope = new Scope(),\n\t\t\tstartupPromises = [];\n\n\t\ta.deleteObjProp(a, '$destroyDispatch');\t\n\t\ta.$config = a.objectAssign({}, defaultConfig, a.isString(_config_)? {name: _config_} : _config_);\n\t\ta.$provider = new Provider(components);\n\t\ta.$compiler = new Compiler(a.$provider);\n\t\ta.$directive = function () { return a.$provider.directive.apply(a, arguments) };\n\t\ta.$controller = function () { return a.$provider.controller.apply(a, arguments) };\n\t\ta.$service = function () { return a.$provider.service.apply(a, arguments) };\n\t\t\n\t\ta.$provider.service('$app', function () { return a; }).alias('$app', a.$config.name);\n\t\t\n\t\t/* Exclusive local storage for this app */\n\t\t[\"sessionStorage\", \"localStorage\"].forEach(function (storage) {\n\t\t\tvar storageId = a.$config.name+\"_$$storage_\",\n\t\t\t\tstorageName = '$'+storage;\n\t\t\ta[storageName] = {\n\t\t\t\tsetItem: function (key, val) { window[storage].setItem(storageId+key, val) },\n\t\t\t\tgetItem: function (key) { return window[storage].getItem(storageId+key) }\n\t\t\t};\n\t\t\ta.$provider.service(storageName, function () { return a[storageName] });\n\t\t});\n\t\t\n\t\t/* Accept promises which must resolve for bootstrap to be completed. */\n\t\ta.$bootstrapDefer = function (p) {\n\t\t\tif (Array.isArray(p)) startupPromises = startupPromises.concat(p);\n\t\t\telse if (p.then) startupPromises.push(p);\n\t\t};\n\t\t\n\t\ta.$service('$rootScope', function () { return rootScope })\n\t\t\t.$service('$config', function () { return a.$config });\n\t\t\n\t\t/* Setup the app and compile the DOM. */\n\t\ta.$bootstrap = function () {\n\t\t\tvar $rootElement = $(a.$config.rootElementSelector).eq(0);\n\t\t\ta.$bootstrap = false;\n\t\t\ta.$service('$rootElement', function () { return $rootElement });\n\t\t\ta.$viewportMonitor = new a.ViewportMonitor();\n\t\t\ta.$scrollMonitor = new a.ScrollMonitor(window);\n\t\t\ta.$breakpointMonitor = new a.BreakpointMonitor({mobile: [0, 540], desktop: [541, 16384]}, $rootElement);\n\t\t\ta.$breakpointMonitor.$on(\"viewportBreakpointChanged\", a.$trigger);\n\t\t\ta.$service('$viewportMonitor', function () { return a.$viewportMonitor })\n\t\t\t .$service('$scrollMonitor', function () { return a.$scrollMonitor })\n\t\t\t .$service('$breakpointMonitor', function () { return a.$breakpointMonitor });\n\t\t\t\n\t\t\tfunction compileDOM(bootstrapResolutions) {\n\t\t\t\ta.$compiler.compile($rootElement[0], rootScope);\n\t\t\t\treturn bootstrapResolutions;\n\t\t\t}\n\t\t\t\n\t\t\ta.$trigger(\"$bootstrapStart\");\n\t\t\treturn a.Promise.all(startupPromises)\n\t\t\t\t.then(compileDOM).catch(compileDOM)\n\t\t\t\t.then(function (bootstrapResolutions) {\n\t\t\t\t\ta.$bootstrap = true;\n\t\t\t\t\ta.$trigger(\"$bootstrapEnd\");\n\t\t\t\t\treturn bootstrapResolutions;\n\t\t\t\t});\n\t\t};\n\t\t\n\t\tif (a.$config.autoBootstrap) $doc.ready(a.$bootstrap);\n\t}\n\n\tArena.prototype = Util;\n\t\n\t'directive controller service'.split(' ').forEach(function (providerName) {\n\t\tArena['$'+providerName] = function (name, fn) {\n\t\t\tif (components[providerName][name]) throw new Error(\"Provider already exists: \"+name);\n\t\t\telse components[providerName][name] = fn;\n\t\t\treturn Arena;\n\t\t};\n\t});\n\t\n\tUtil.objectKeys(Util).forEach(function (utilName) {\n\t\tArena.$service(utilName, function () { return Util[utilName] });\n\t});\t\n\t\n\tArena\n\t\t.$service('$html', function () { return $html })\n\t\t.$service('$window', function () { return $win })\n\t\t.$service('$document', function () { return $doc })\n\t\t.$service(\"$router\", require(\"./core/providers/routerService.js\"))\n\t\t.$directive(\"controller\", require(\"./core/providers/controllerDirective.js\"))\n\t\t.$directive(\"mainView\", require(\"./core/providers/mainViewDirective.js\"));\n\t\n\twindow.ARENA = Arena;\n\tif (typeof module !== 'undefined' && module.exports) module.exports = Arena;\n\tif (typeof define == 'function' && define.amd) define(function(){ return Arena });\n})(jQuery);","/** \n * @class Scope\n *\n * @description \n *\t\tCreate an application model/context for views and controllers.\n *\t\tAll scopes are eventDispatches.\n *\t\tScopes can be nested, with parents available as $scope.$parent, and array of child scopes \n *\t\tas $scope.$children.\n * \n * @example\n \t\t`var $rootScope = new Scope();`\n *\n * @method $create Create a new scope\n *\t\t`var $rootScope = new Scope();\t\t\t\t// Has no parent. Cannot be $destroy(ed)\n *\t\t var $childScope = $rootScope.$create();`\t// Child of rootscope. Can be destroyed\n *\n * @method $emit Trigger an event on a scope and all it's decendants\n *\t\t`$childScope.$on('someEvent'); \n *\t\t $rootScope.$emit(event);`\t\t\t\t\t// $child will dispatch someEvent\n * \n * @method $broadcast Trigger an event on a scope and all it's ancestors\n *\t\t`$rootScope.$on('someEvent'); \n *\t\t $childScope.$broadcast(event);`\t\t\t// $rootScope will dispatch someEvent\n *\n * @method $destroy Destroy a scope\n *  `$childScope.$destroy();\n *   $childScope.$trigger('someEvent');`\t\t\t// Does nothing because scope is destroyed\n *\n * @fires $scope#$destroy\n *\t\t- when $destroy function is called.\n *\n * @requires makeEventDispatch\n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n */\n\nvar Scope = (function (makeEventDispatch) {\n\t'use strict';\n\t\n\tfunction Scope(parent, callback) {\n\t\tvar scope = makeEventDispatch(this),\n\t\t\tid = (parent && parent.$children? parent.$children.length : 0).toString();\n\t\tthis.$id = (parent && parent.$id)? parent.$id+\".\"+id : id;\n\t\t\n\t\tif (parent) {\n\t\t\tthis.$parent = parent;\n\t\t\tparent.$children.push(scope);\n\t\t}\n\t\tthis.$children = [];\n\t\t\n\t\tfunction createScope(isolate, callback) {\n\t\t\tvar newScope;\n\t\t\t\n\t\t\tif (isolate) {\n\t\t\t\tnewScope = new Scope(scope, callback);\n\t\t\t} else {\n\t\t\t\tvar S = function(){ return Scope.call(this, scope, callback); };\n\t\t\t\tS.prototype = scope;\n\t\t\t\tnewScope = new S();\n\t\t\t}\n\t\t\t\n\t\t\tif (!newScope.$root) \n\t\t\t\tnewScope.$root = scope.$root || scope;\n\t\t\treturn newScope;\n\t\t}\n\n\t\tfunction destroyScope() {\n\t\t\tif (!scope.$parent) return;\t\t\t\t\t// $rootScope is always indestructible\n\t\t\telse scope.$trigger(\"$destroy\");\n\t\t\t\n\t\t\tfor (var c = scope.$children.length; c; c--) \n\t\t\t\tscope.$children[c-1].$destroy();\n\n\t\t\tvar siblings = scope.$parent.$children;\n\t\t\tsiblings.splice(siblings.indexOf(scope), 1);\n\t\t\tscope.$destroyDispatch();\t\t\t\t\t// End all event listeners\n\t\t\tscope.$parent = scope.$root = scope.$$watchers = null;\n\t\t\tscope.$destroyed = true;\n\t\t}\n\n\t\tfunction emitEvent(e) {\n\t\t\tif (!e.stopPropagation) \n\t\t\t\ttry{\n\t\t\t\t\te.stopPropagation = function () { e.__propagationStopped__ = true; };\n\t\t\t\t} catch (e) {}\n\t\t\tscope.$trigger(e);\n\t\t\tscope.$children.forEach(function (childScope) {\n\t\t\t\tif (!e.__propagationStopped__) childScope.$emit(e);\n\t\t\t});\n\t\t\treturn scope;\n\t\t}\n\n\t\tfunction broadcastEvent(e) {\n\t\t\tif (!e.stopPropagation) \n\t\t\t\ttry {\n\t\t\t\t\te.stopPropagation = function () { e.__propagationStopped__ = true; };\n\t\t\t\t} catch (e) {}\n\t\t\tscope.$trigger(e);\n\t\t\tif (scope.$parent && !e.__propagationStopped__) \n\t\t\t\tscope.$parent.$broadcast(e);\n\t\t\treturn scope;\n\t\t}\n\t\t\n\t\tthis.$create = createScope;\n\t\tthis.$destroy = destroyScope;\n\t\tthis.$emit = emitEvent;\n\t\tthis.$broadcast = broadcastEvent;\n\t\t\n\t\tif (typeof callback === \"function\") callback(this);\n\t}\n\t\n\t//TODO: dirty checking - $digest option???\n\treturn Scope;\n})(require(\"../utilities/makeEventDispatch.js\"));\n\nif (typeof module !== 'undefined' && module.exports) module.exports = Scope;\nif (typeof define == 'function' && define.amd) define(function(){ return Scope; });","/** \n * @class Provider\n *\n * @description \n *\t\tRegister and provide components.\n *\t\tComponents can be `directive`, `controller` or `service`.\n *\t\tA component must be registered using the function of corresponding name.\n *\t\tOnce registered a component can be accessed using the function of corresponding name.\n *\t\tAll components must be registered as a provider function, which returns component.\n *\t\tRegistered components can be aliased. The alias method accepts an `extend` function which \n *\t\tmodify the aliased component.\n *\n *\t\tArray of dependencies should be added to provider function as static property named `$dependencies`, \n *\t\tto avoid problems when minified.\n *\t\t\n *\t\tWhen providing a service or controller, the provider will instantiate provider. \n *\t\tThis instance will cached if a `$cache` property is present on the provider.\n *\t\t\n *\t\tDirective providers must return a function or object which contains a `link` property \n *\t\twhich is a function.\n *\t\tDirectives are invoked normally, but the result is cached by default unless `$cache === false`.\n * \n * @example \n \t\t`var directiveProvider = function (aDependency) {\n\t\t \treturn {\n\t\t\t\tscope: true,\n\t\t\t\tcontroller: \"aController\",\n\t\t\t\tlink: function ($scope, $element) {\n\t\t\t\t\taDependency.doSomethingWith($element);\n\t\t\t\t}\n\t\t\t};\n\t\t };\n\t\t directiveProvider.$dependencies = [\"aDependency\"];\n\t\t \n\t\t var $provider = new Provider();\n\t\t $provider.directive(\"directiveName\", directiveProvider);\n\t\t $provider.controller(\"aController\", function conrollerProvider() {this.x = function y(){};});\n\t\t $provider.service(\"aDependency\", function dependencyProvider() {return dependency;});\n\t\t \n\t\t $provider.alias(\"directiveName\", \".someSelector\");\n\t\t $provider.alias('mainView', 'otherView', function (directive) {\n\t\t\t\tvar data = directive.data;\n\t\t\t\tdirective.data = function ($element) {\n\t\t\t\t\treturn Object.assign({}, data, {mainView: $element.data('other-view')});\n\t\t\t\t};\n\t\t\t\treturn directive;\n\t\t\t});\n\t\t \n\t\t var directive = $provider.directive(\"differentDirectiveName\");`\n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n */\n\nvar Provider = (function (undefined) {\n\t'use strict';\n\t\n\tvar DIRECTIVE_SUFFIX = ' _DIRECTIVE_',\n\t\tCONTROLLER_SUFFIX = ' _CONTROLLER_';\n\t\t\n\tfunction extractParamNames(fn) {\n\t\tvar params= fn.toString().replace(/((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg, '').match(/\\((.*?)\\)/);\n\t\tif (params && params[1]) return params[1].split(',').map(function (p) { return p.trim(); });\n\t\telse return [];\n\t}\n\n\tfunction construct(constructor, args) {\n\t\tfunction C() { return constructor.apply(this, args); }\n\t\tC.prototype = constructor.prototype;\n\t\treturn new C();\n\t}\n\t\n\t\n\tfunction Provider(_components_) {\n\t\tvar provider = this,\n\t\t\tproviders = {},\n\t\t\tcache = {$$directiveSelectors: []};\n\t\n\t\t/* Dependency names must be attched to class using static $dependencies array: \n\t\t\t`function myService(){}; myService.$dependencies = [\"aDependencyName\"];` */\n\t\tfunction getDependencies(f, locals) {\n    \t\tlocals = locals || {};\n\t\t\treturn (Array.isArray(f.$dependencies)? f.$dependencies : extractParamNames(f))\n\t\t\t\t\t.map(function (s) { return locals[s] || provider.service(s, null, locals) });\n\t\t}\n\t\n\t\t/* Do not allow providers to be replaced */\n\t\tfunction checkSecurity(name) { \t\t\t\t\n\t\t\tif (providers[name]) throw new Error(\"Provider already exists: \"+name);\n\t\t\treturn name;\n\t\t}\n\t\t\n\t\t\n\t\tthis.directive = function (name, fn, locals) {\n\t\t\t/* Return directive list if no args */\n\t\t\tif (!arguments.length) return cache.$$directiveSelectors;\n\t\t\t\n\t\t\tvar directiveName = name + DIRECTIVE_SUFFIX;\t\n\n\t\t\t/* Provide directive when fn omitted */\n\t\t\tif (name && !fn) {\n\t\t\t\tvar providr = providers[directiveName],\n\t\t\t\t\tcached = cache[directiveName];\n\t\t\t\tif (typeof cached !== 'undefined') return cached;\n\t\t\t\tif (!providr) return;\n\t\t\t\tcached = provider.invoke(providr, locals);\n\t\t\t\tif (typeof cached === \"function\") cached = {link: cached};\n\t\t\t\treturn cache[directiveName] = cached;\n\t\t\t}\n\t\t\t\n\t\t\tcheckSecurity(directiveName);\n\n\t\t\t/* Register directive */\n\t\t\tproviders[directiveName] = fn;\n\t\t\tcache.$$directiveSelectors.push(name);\n\t\t\treturn this;\n\t\t};\n\t\t\n    \tthis.controller = function (name, fn, locals) {\n\t\t\tvar controllerName = name + CONTROLLER_SUFFIX;\n\n\t\t\t/* Provide controller when fn omitted */\n\t\t\tif (name && !fn) {\n\t\t\t\tvar providr = providers[controllerName];\n\t\t\t\tif(providr) return provider.instantiate(providr, locals);\n\t\t\t\telse return;\n\t\t\t}\n\t\t\t\n\t\t\tcheckSecurity(controllerName);\n\n\t\t\t/* Register controller */\n\t\t\tproviders[controllerName] = fn;\n\t\t\treturn this;\n    \t};\n\t\t\n\t\tthis.service = function (name, fn, locals) {\n\t\t\tif (name && !fn) {\n\t\t\t\t/* Provide service when fn omitted */\n\t\t\t\tvar providr = providers[name],\n\t\t\t\t\tcached = cache[name];\n\n\t\t\t\tif (typeof cached !== 'undefined'){\n\t\t\t\t\treturn cached;\n\t\t\t\t} else if (typeof providr === 'function') {\n\t\t\t\t\tvar service = provider.instantiate(providr, locals);\n\t\t\t\t\tif(providr.$cache !== false) cache[name] = service;\n\t\t\t\t\treturn service;\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if(checkSecurity(name)) {\n\t\t\t\t/* Register service */\n\t\t\t\tproviders[name] = fn;\n\t\t\t}\n\t\t\treturn this;\n    \t};\n\t\t\n\t\t\n\t\tthis.invoke = function (fn, locals) {\n\t\t\treturn fn.apply(null, getDependencies(fn, locals));\n\t\t};\n\t\t\n    \tthis.instantiate = function (fn, locals) {\n\t\t\treturn construct(fn, getDependencies(fn, locals));\n    \t};\n\t\t\n\t\tthis.alias = function (name, alias, extendFn) {\n\t\t\tvar hasAlias;\n\t\t\t\n\t\t\tfunction aliasType(_type_) {\n\t\t\t\tvar originalDirective = provider[_type_](name);\n\t\t\t\tif (originalDirective === undefined) return;\n\n\t\t\t\thasAlias = provider[_type_](alias, function () {\n\t\t\t\t\tif (typeof extendFn === \"function\")\n\t\t\t\t\t\treturn extendFn(Object.create(originalDirective));\n\t\t\t\t\telse\n\t\t\t\t\t\treturn originalDirective;\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t[\"service\", \"directive\", \"controller\"].forEach(aliasType);\n\t\t\t\n\t\t\tif (!hasAlias) throw new Error(name+\" has not been provided.\");\n\t\t\treturn provider;\n\t\t};\n\t\n\t\tif (_components_)\n\t\t\t'directive controller service'.split(' ')\n\t\t\t\t.forEach(function (providerName) {\n\t\t\t\t\tfor (var componentName in _components_[providerName])\n\t\t\t\t\t\tprovider[providerName](componentName, _components_[providerName][componentName]);\n\t\t\t\t});\n\t}\n\t\n\treturn Provider;\n}());\n\nif (typeof module !== 'undefined' && module.exports) module.exports = Provider;\nif (typeof define == 'function' && define.amd) define(function(){ return Provider });","/** \n * @class Compiler\n *\n * @description \n *\t\tCompile the DOM into views by finding directives and linking to scopes and controllers.\n * \n * @example\n \t\t`var directiveProvider = function (aDependency) {\n\t\t \treturn {link: function ($scope, $element) {\n\t\t\t\taDependency.doSomethingWith($element);\n\t\t\t}};\n\t\t };\n\t\t directiveProvider.$dependencies = [\"aDependency\"];\n\t\t \n\t\t var $provider = new Provider();\n\t\t $provider.directive(\"directiveName\", directiveProvider);\n\t\t $provider.service(\"aDependency\", function dependencyProvider() {return aDependency;});\n\t\t \n\t\t var $rootScope = new Scope();\n\t\t var rootElement = document.querySelector('html');\n\t\t \n\t\t var $compiler = new Compiler($provider);\n\t\t $compiler.compile(rootElement, $rootScope);`\n * \n * @requires Provider\n * @requires Scope\n * @requires jQuery\n * @requires Promise\n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n */\n\nvar Compiler = (function (compilerId, $, Promise, util) {\n\t'use strict';\n\t\n\tfunction Compiler(provider) {\n\t\tvar compiler = this,\n\t\t\ttestCache = [];\n\t\t\n\t\tthis.provider = provider;\n\t\t\n\t\tthis.findDirectives = function findDirectives(el, locals) {\n\t\t\tvar result = [];\n\n\t\t\tvar directiveList = provider.directive();\t// Cache tests for supa speed\n\t\t\tif (directiveList.length !== testCache.length) {\n\t\t\t\tdirectiveList.slice(testCache.length)\n\t\t\t\t\t.forEach(function (name) { \n\t\t\t\t\t\ttestCache.push(new DirectiveTester(name)); \n\t\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\ttestCache.forEach(function (tester, index) {\n\t\t\t\tif (tester.test(el)) result.push(provider.directive(tester.name, null, locals));\n\t\t\t});\n\t\t\treturn result;\n\t\t};\n\t\t\n\t\tthis.compile = function compile(el, parent, linkToElement, terminal, autoCompile) {\n\t\t\tvar parentScope = parent || getScope(el.parentNode),\n\t\t\t\texistingScope = getCompilerData(el, '$scope'),\n\t\t\t\tscope = existingScope,\n\t\t\t\texistingDirectives = getCompilerData(el, '$directives') || [],\n\t\t\t\tmatchingDirectives = diff(compiler.findDirectives(el, {}), existingDirectives),\n\t\t\t\tcompilingThisElement = !!matchingDirectives.length,\n\t\t\t\tdirectivesRequireScope = requiresScope(matchingDirectives),\n\t\t\t\tdirectivesRequireIsolatedScope = requiresIsolateScope(matchingDirectives),\n\t\t\t\tcompileDefer = [];\n\t\t\t\n\t\t\tif (linkToElement) {\n\t\t\t\tif (existingScope) existingScope.$destroy();\n\t\t\t\tlinkToElement = scope = parent? parentScope : parentScope.$create(directivesRequireIsolatedScope);\n\t\t\t} else if (compilingThisElement && directivesRequireScope && !existingScope) {\n\t\t\t\tlinkToElement = scope = parentScope.$create(directivesRequireIsolatedScope);\n\t\t\t}\n\t\t\t\n\t\t\tvar wrappedEl = compilingThisElement || linkToElement? $(el) : null,\n\t\t\t\telementData = wrappedEl? wrappedEl.data() : null;\n\t\t\t\n\t\t\tif (!scope) scope = parentScope;\n\t\t\t\n\t\t\tfunction endCompileNode() {\n\t\t\t\tif (linkToElement) {\n\t\t\t\t\tsetCompilerData(el, '$scope', linkToElement);\n\t\t\t\t\twrappedEl.on('$destroy', scope.$destroy);\n\t\t\t\t\tscope.$once('$destroy', function () {\n\t\t\t\t\t\twrappedEl.off('$destroy', scope.$destroy);\n\t\t\t\t\t\twrappedEl.removeClass('scope-linked').triggerHandler(\"$compile.removeScope\"); \n\t\t\t\t\t\tsetCompilerData(el, '$scope', null);\n\t\t\t\t\t});\n\t\t\t\t\twrappedEl.addClass('scope-linked'); \n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (compilingThisElement) {\n\t\t\t\t\tsetCompilerData(el, '$directives', existingDirectives.concat(matchingDirectives));\n\t\t\t\t\tscope.$once('$destroy', function () { setCompilerData(el, '$directives', null) });\n\t\t\t\t\twrappedEl.triggerHandler(\"$compile.end\"); \n\t\t\t\t}\n\t\t\t\treturn scope;\n\t\t\t}\n\t\t\t\n\t\t\tfunction linkDirectiveToNode(directive) {\n\t\t\t\tvar directiveData = elementData,\n\t\t\t\t\tdirectiveController;\n\t\t\t\tif (typeof directive.data === \"function\") {\n\t\t\t\t\tdirectiveData = util.objectAssign({}, directive.data(wrappedEl, scope), elementData);\n\t\t\t\t} else if (typeof directive.data === \"object\") {\n\t\t\t\t\tdirectiveData = util.objectAssign({}, directive.data, elementData);\n\t\t\t\t}\n\t\t\t\tif (typeof directive.controller === \"function\") {\n\t\t\t\t\tdirectiveController = provider.instantiate(directive.controller, {$scope: scope});\n\t\t\t\t} else if (typeof directive.controller === \"string\") {\n\t\t\t\t\tdirectiveController = provider.controller(directive.controller, null, {$scope: scope});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttry{\n\t\t\t\t\tdirective.link(wrappedEl, scope, directiveData, directiveController);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error('Error compiling: ', e);\t// TODO: Something?\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (!scope.$deferCompile) {\n\t\t\t\tscope.$deferCompile = function (promise) { \n\t\t\t\t\tif (promise && promise.then === \"function\") compileDefer.push(promise); \n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\tif (compilingThisElement) {\n\t\t\t\twrappedEl.triggerHandler(\"$compile.start\");\n\t\t\t\tmatchingDirectives.forEach(linkDirectiveToNode);\n\t\t\t}\n\t\t\t\n\t\t\tif (!terminal) {\n\t\t\t\tArray.prototype.slice.call(el.childNodes).forEach(function compileNode(child) { \n\t\t\t\t\tscope.$deferCompile( compiler.compile(child, scope, null, false, true) );\n\t\t\t\t}, compiler);\n\t\t\t}\n\t\t\t\n\t\t\tif (autoCompile && !compileDefer.length) endCompileNode();\n\t\t\telse return Promise.all(compileDefer).then(endCompileNode);\n\t\t};\n\t}\n\t\n\n\tfunction DirectiveTester(name) {\n\t\tthis.name = name;\t\t\t\t\t\t\t// Should not have spaces here\n\t\tthis.nameSanitized = this.name.replace(/[^0-9a-zA-Z-_]/g, '');\n\t\tthis.nameDashed = this.nameSanitized.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n\t\tvar tests = [];\n\t\t\n\t\tif (this.name.indexOf('.')===0) {\t\t\t// Matches Class\n\t\t\tvar classRegEx = new RegExp(' '+ this.name.slice(1) +' ');\n\t\t\ttests.push(function checkClass(el) { \n\t\t\t\treturn (' '+ el.className +' ').indexOf(' '+ this.nameSanitized +' ') > -1;\n\t\t\t});\n\t\t} else if (this.name.indexOf('#')===0) {\t// Matches Id\n\t\t\tvar idTest = this.name.slice(1);\n\t\t\ttests.push(function checkId(el) { return el.getAttribute('id')===idTest });\n\t\t} else {\n\t\t\ttests.push(function checkAttribute(el) {\n\t\t\t\treturn el.nodeName.toLowerCase() === this.nameDashed\t// Matches Tag\n\t\t\t\t\t\t|| el.hasAttribute(this.nameSanitized)  \t\t// Matches attribute\n\t\t\t\t\t\t|| el.hasAttribute(this.nameDashed)\n\t\t\t\t\t\t|| el.hasAttribute('data-'+this.nameDashed);\t// Matches data attribute\n\t\t\t});\n\t\t}\n\t\t\n\t\tthis.test = function runAllTests(el) {\n\t\t\tif (el.tagName) {\t\t\t\t// node.nodeType === 1 || node.nodeType === 11\n\t\t\t\tfor(var i=0; i < tests.length; i++)\n\t\t\t\t\tif (tests[i].call(this, el)) return true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t}\n\n\tfunction diff(A, B) {\n\t\treturn A.filter(function (x) { return B.indexOf(x) < 0; });\n\t}\n\t\t\n\tfunction requiresScope(directives) { \n\t\treturn directives.filter(function(directive) {return directive.scope;}).length\n\t}\n\n\tfunction requiresIsolateScope(directives) { \n\t\treturn directives.filter(function(directive) {return typeof directive.scope === \"object\";}).length\n\t}\n\t\t\n\tfunction getCompilerData(el, prop) { \n\t\treturn el[compilerId]? el[compilerId][prop] : null; \n\t}\n\t\n\tfunction setCompilerData(el, prop, val) {\n\t\tif (!el[compilerId]) el[compilerId] = {};\n\t\tel[compilerId][prop] = val;\n\t}\n\t\n\tfunction getScope(element) {\n\t\treturn getCompilerData(element, '$scope') || getScope(element.parentNode);\n\t}\n\t\t\n\treturn Compiler;\n})(\n\t'$$compiler'+(Math.random() * 10921), \n\tjQuery || Zepto, \n\trequire(\"../utilities/pLitr.js\"), \n\trequire(\"../utilities/Util.js\")\n);\n\nif (typeof module !== 'undefined' && module.exports) module.exports = Compiler;\nif (typeof define == 'function' && define.amd) define(function(){ return Compiler; });","/** @class $cookie: \n *\n * @example\n \t  `$cookie\n\t\t\t.set(<string (name)>, <string (value)>[, <number (days)>, <string (path)>, <string (domain)>, <boolean (secure)>]);`\n * @example\n \t\t`$cookie\n\t\t\t.get(<string (name)>);`\n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n */\n\nvar $cookie = (function () {\n\tfunction set(cookieName, cookieValue, lifeInDays, path, domain, secure) {\n\t\tvar expiryDate\n\t\t\t, today = new Date();\n\t\ttoday.setTime( today.getTime() );\n\t\t\n\t\tif( lifeInDays ) lifeInDays = lifeInDays * 1000 * 60 * 60 * 24;\n\t\texpiryDate = new Date( today.getTime() + (lifeInDays || 0) );\n\t\t\n\t\tdocument.cookie = cookieName \n\t\t\t+ \"=\" +escape( cookieValue ) \n\t\t\t+ ( ( lifeInDays ) ? \";expires=\" + expiryDate.toGMTString() : \"\" ) \n\t\t\t+ \";path=\" + ( path || \"/\" ) \n\t\t\t+ ( ( domain ) ? \";domain=\" + domain : \"\" ) \n\t\t\t+ ( ( secure ) ? \";secure\" : \"\" );\n\t}\n\t\n\tfunction get(cookieName) {\n\t\tif(document.cookie.length > 0){\n\t\t\tvar cookieArray = document.cookie.split(\";\")\n\t\t\t\t, i, l, u, a;\n\t\t\tfor (i = 0, l = cookieArray.length; i < l; i++) {\n\t\t\t\tu = cookieArray[i].substr(0, cookieArray[i].indexOf(\"=\"));\n\t\t\t\ta = cookieArray[i].substr(cookieArray[i].indexOf(\"=\") + 1);\n\t\t\t\tu = u.replace(/^\\s+|\\s+$/g,\"\");\n\t\t\t\tif (u == cookieName) return decodeURI(a);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn { set: set, get: get };\n})();\n\nif (typeof module !== 'undefined' && module.exports) module.exports = $cookie;\nif (typeof define == 'function' && define.amd) define(function(){ return $cookie; });","/** \n * @function provisionaryPromise:\n * @description Runs a test on a loop \n * \tand resolves a promise when test passes or rejects after time limit exired.\n *\n * @param {String} testName\n * @param {Function} test Test for promise (should return true if test passes)\n * @param {number} timeToWait time to wait before rejecting (default: 5000ms)\n * @param {number} interval frequency at which to repeat (default: 100ms)\n * @returns {Promise} resolved/rejected by success/failure\n * \n * @example\n\t\t`var p = provisionaryPromise(\"loadGoogleFont\", function(){ \n\t\t\t\treturn $(html).hasClass('wf-active') \n\t\t\t}, 5000).then(function domSomething() { ... });`\n\t\t\n * @requires Promise\n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n */\n\nvar provisionaryPromise = (function (Promise) {\n\t\n\treturn function (testName, test, timeToWait, interval) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tvar frequency = interval || 100\n\t\t\t\t, timer = timeToWait || 5000\n\t\t\t\t, testRunner\n\t\t\t\t, timeout = setTimeout(function stopTrying() {\n\t\t\t\t\t\tclearInterval(testRunner);\n\t\t\t\t\t\treject(testName+\" timed out in \"+timer+\"ms.\");\n\t\t\t\t\t}, timer);\n\n\t\t\ttestRunner = setInterval(function runTest() {\n\t\t\t\tvar passingResult = test();\n\t\t\t\tif(!passingResult) return;\n\t\t\t\tclearTimeout(timeout);\n\t\t\t\tclearInterval(testRunner);\n\t\t\t\tresolve(passingResult);\n\t\t\t}, frequency);\n\t\t});\n\t}\n})(require(\"./pLitr\"));\n\nif (typeof module !== 'undefined' && module.exports) module.exports = provisionaryPromise;\nelse if (typeof define == 'function' && define.amd) define(function(){ return provisionaryPromise; });\n","/** \n * @class viewportMonitor\n * @description Resize events width viewport data in event\n *\n * @fires viewportMonitor#resize - Event contains: viewportDimensions (width, height, prvHWidth, prvHeight (Number)\n *\n * @method viewportDimensionsGet viewport data (width, height, previousWidth, previousHeight)\n \t\t\t`var dimensions = monitor.viewportDimensions()`\n * @method destroy Kill the viewportMonitor (and remove all remaining handlers)\n\t\t\t`monitor.kill()`\n *\n * @example \n \t\t\t`var monitor = new viewportMonitor() \t\t//Create a monitor`\n *\n * @requires jQuery\n * @requires MakeEventDispatch\n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n */\n\nvar ViewportMonitor = (function($, MakeEventDispatch) {\n\tvar $window = $(window)\n\t\t,\tmonitorCount = 0\n\t\t,\tviewportDimensions = {}\n\t\t,\tmonitorDispatch = new MakeEventDispatch()\n\t\t,\tWINDOW_RESIZE_EVENT = \"resize\";\n\t\n\tfunction updateviewportDimensions(e) {\n\t\tvar winWidth = window.innerWidth || window.clientWidth\n\t\t\t,\twinHeight = window.innerHeight ||  window.clientHeight;\n\t\tif (winWidth === viewportDimensions.prvWidth && winHeight === viewportDimensions.prvHeight) \n\t\t\treturn;\n\t\tviewportDimensions.prvWidth = viewportDimensions.width;\n\t\tviewportDimensions.prvHeight = viewportDimensions.height;\n\t\tviewportDimensions.width = winWidth;\n\t\tviewportDimensions.height = winHeight;\n\t\tmonitorDispatch.$trigger({\n\t\t\ttype: WINDOW_RESIZE_EVENT,\n\t\t\tresizeEvent: e, \n\t\t\tviewportDimensions: viewportDimensions\n\t\t});\n\t}\n\t$window.on(\"resize.viewportMonitor\", updateviewportDimensions);\n\tupdateviewportDimensions();\n\t\n\tfunction ViewportMonitor() {\n\t\tvar m = MakeEventDispatch(this);\n\t\tfunction updateListners(e) { \n\t\t\tm.width = e.viewportDimensions.width;\n\t\t\tm.height = e.viewportDimensions.height;\n\t\t\tm.prvHeight = e.viewportDimensions.prvHeight;\n\t\t\tm.prvWidth = e.viewportDimensions.prvWidth;\n\t\t\te.preventDefault && m.$trigger(e); \n\t\t}\n\t\tmonitorDispatch.$on(WINDOW_RESIZE_EVENT, updateListners);\n\t\tupdateListners({viewportDimensions: viewportDimensions});\n\t\t\n\t\tm.destroy = function () {\n\t\t\tm.$destroyDispatch();\n\t\t\tmonitorDispatch.$off(WINDOW_RESIZE_EVENT, updateListners);\n\t\t\tm.bind = function () { throw \"This monitor has been destroyed.\"; };\n\t\t};\n\t}\n\t\t\n\tViewportMonitor.prototype.viewportDimensions = function () { return viewportDimensions; };\n\t\n\treturn ViewportMonitor;\n})(jQuery || Zepto, require(\"./makeEventDispatch.js\"));\n\nif (typeof module !== 'undefined' && module.exports) module.exports = ViewportMonitor;\nelse if (typeof define == 'function' && define.amd) define(function(){ return ViewportMonitor; });\n","/** \n * @class ScrollMonitor\n * @description Listes for browser scroll event and dispatches \"scroll\" event with some useful info.\n *   Provides ElementTracker api for tracking scroll of elements and triggering/subscribing events.\n * \n * @fires scrollMonitor#scroll - Event contains: position ({Number} scroll position), prvPosition (Number), scrollDirection {String} \"down\" or \"up\".\n *\n * @method bind Takes an element and returns an ElementTracker. \n \t\t\t\t\t\t\t\tAccepts {Number} thresholdX/thresholdY parameters for cropping watched area of viewport axes.\n\t\t\t\t\t\t\t\tE.g: `bind(element, 0.5, 0.5)` will treat window as if half its actual size.\n * @method unbind Destroys an ElementTracker produced by this Scrollmonitor.\n * @method destroy Destroys the Scrollmonitor, and any ElementTrackers bound to it.\n * @method scrollTo Scroll to an element: `monitor.scrollTo(element, speed, offset, beforeFn, afterFn)`\n *\n * @requires jQuery\n * @requires MakeEventDispatch\n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n */\n\t\nvar ScrollMonitor = (function($, makeEventDispatch){\n\tvar $window = $(window)\n\t\t, $htmlBody = $('html, body')\n\t\t, ids = 0\n\t\t, winWidth\n\t\t, winHeight;\n\t\t\n\tfunction updateWindowDimensions() {\n\t\twinWidth = window.innerWidth || window.clientWidth;\n\t\twinHeight = window.innerHeight ||  window.clientHeight;\n\t}\n\t$window.on(\"resize.scrollMonitor\", updateWindowDimensions);\n\tupdateWindowDimensions();\n\t\n\t\n\t/** \n\t * @class ElementTracker\n\t * @description Listens for \"scroll\" event from scrollMonitor and tracks element position relative to viewport.\n\t * \n\t * @param {Element} monitoredElement Element to attach scroll listeners to. Default: window.\n\t * @param {scrollMonitor} scrollMonitor\n\t * @param {element} thresholdX DOM element to track\n\t * @param {Number} thresholdX Change active area of viewport. E.g: 0.5 will treat window as if half its actual width.\n\t * @param {Number} thresholdY Change active area of viewport. E.g: 0.5 will treat window as if half its actual height.\n\t *\n\t * @method checkPosition Checks position and triggers relevant events.\n\t *\n\t * @fires ElementTracker#inView - Fired on scroll, if any part of element is in viewport.\n\t * @fires ElementTracker#outOfView - Fired on scroll, if no part of element is in viewport.\n\t * @fires ElementTracker#enterView - Fired on scroll, if element enters viewport.\n\t * @fires ElementTracker#exitView - Fired on scroll, if element leaves viewport.\n\t * @fires ElementTracker#[top, bottom, left, right]EnterView \n\t *\t\t\t\t\t- Fired on scroll, if an edge of the element enters the viewport.\n\t * @fires ElementTracker#[top, bottom, left, right]ExitView \n\t *\t\t\t\t\t- Fired on scroll, if an edge of the element exits the viewport.\n\t */\n\tfunction ElementTracker(scrollMonitor, element, thresholdX, thresholdY) {\n\t\tvar et = makeEventDispatch(this);\t\n\t\t\n\t\tet.element = element.getBoundingClientRect? element : element[0];\n\t\tet.scrollMonitor = scrollMonitor;\n\t\tif (typeof thresholdX == \"number\") et.thresholdX = thresholdX;\n\t\tif (typeof thresholdY == \"number\") et.thresholdY = thresholdY;\n\t\t\n\t\tet.checkPosition = function (e) { \n\t\t\tvar rect = et.element.getBoundingClientRect()\n\t\t\t\t, elH = rect.height || et.element.offsetHeight\n\t\t\t\t, elW = rect.width || et.element.offsetWidth\n\t\t\t\t, ofsX = winWidth * et.thresholdX\n\t\t\t\t, ofsY = winHeight * et.thresholdY;\n\t\t\t\n\t\t\tvar state = {\n\t\t\t\t\ttopInBounds: (rect.top <= winHeight - ofsY) && (rect.top >= ofsY),\n\t\t\t\t\tbottomInBounds: (rect.bottom >= ofsY) && (rect.bottom <= winHeight - ofsY),\n\t\t\t\t\trightInBounds: (rect.right <= winWidth - ofsX) && (rect.right >= ofsX),\n\t\t\t\t\tleftInBounds: (rect.left >= ofsX) && (rect.left <= winWidth - ofsX),\n\t\t\t\t\txCovered: (rect.left < ofsX) && (rect.right > winWidth - ofsX),\n\t\t\t\t\tyCovered: (rect.top < ofsY) && (rect.bottom > winHeight - ofsY)\n\t\t\t\t};\t\n\t\t\tstate.xVisible = state.xCovered || state.rightInBounds || state.leftInBounds;\n\t\t\tstate.yVisible = state.yCovered || state.topInBounds || state.bottomInBounds;\n\t\t\t\n\t\t\tet.triggerEvents((e && e.scrollEvent)? e.scrollEvent : e, state);\n\t\t\treturn et;\n\t\t};\n\t\t\n\t\tvar unMonitor = scrollMonitor.$on(\"scroll\", et.checkPosition);\n\t\tet.$on(\"$destroyDispatch\", unMonitor);\t\n\t}\n\t\n\tElementTracker.prototype = {\n\t\tthresholdX: 0,\n\t\tthresholdY: 0,\n\t\ttopInView: false,\n\t\tbottomInView: false,\n\t\trightInView: false,\n\t\tleftInView: false,\n\t\txCovered: false,\n\t\tyCovered: false,\n\t\tisInView: false,\n\t\ttriggerEvents: function (originalEvent, newState) {\n\t\t\tvar et = this\n\t\t\t\t, wasVisible = et.isInView\n\t\t\t\t, isVisible = et.isInView = newState.xVisible && newState.yVisible\n\t\t\t\t, createEvent = function (eventType) {\n\t\t\t\t\treturn {type: eventType, scrollEvent: originalEvent, scrollData: et.scrollMonitor}\n\t\t\t\t};\n\t\t\tet.xVisible = newState.xVisible;\n\t\t\tet.yVisible = newState.yVisible;\n\t\t\t\n\t\t\t['top', 'bottom', 'left', 'right'].forEach(function (edge) {\n\t\t\t\tvar inBoundsProp = edge+\"InBounds\"\n\t\t\t\t\t, inViewProp = edge+\"InView\";\n\t\t\t\tif (newState[inBoundsProp] !== et[inViewProp] || isVisible !== wasVisible) {\n\t\t\t\t\tvar edgeIsVisbible = isVisible && newState[inBoundsProp];\t\n\t\t\t\t\tif (edgeIsVisbible !== et[inViewProp]) {\n\t\t\t\t\t\tet[inViewProp] = edgeIsVisbible;\n\t\t\t\t\t\tet.$trigger(createEvent(edgeIsVisbible? (edge+\"EnterView\") : (edge+\"ExitView\")));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif (!wasVisible && isVisible) et.$trigger(createEvent(\"enterView\"));\t\n\t\t\tif (wasVisible && !isVisible) et.$trigger(createEvent(\"exitView\"));\t\t\t\n\t\t\tif (isVisible) et.$trigger(createEvent(\"inView\"));\n\t\t\telse et.$trigger(createEvent(\"outOfView\"));\n\t\t}\n\t};\n\n\t\n\tfunction ScrollMonitor(monitoredElement) {\n\t\tvar m = makeEventDispatch(this)\n\t\t\t, $el = monitoredElement? $(monitoredElement) : $window\n\t\t\t, bindingsMap = [];\n\t\t\n\t\tfunction updateScrollData(e) { \n\t\t\tm.prvPosition = m.position || 0;\n\t\t\tm.position = $el.scrollTop();\n\t\t\tm.scrollDirection = (m.position > m.prvPosition)? \"down\" : \"up\";\n\t\t\tif (m.prvPosition !== m.position) m.$trigger({\n\t\t\t\t\ttype: \"scroll\",\n\t\t\t\t\tscrollEvent: e, \n\t\t\t\t\tscrollData: m\n\t\t\t\t});\n\t\t}\n\t\t\n\t\tm.id = \"scrollMonitor_\"+(++ids);\n\t\tm.element = $el;\n\t\n\t\tm.bind = function (element, thresholdX, thresholdY) {\n\t\t\tvar binding = {\n\t\t\t\telement: element,\n\t\t\t\ttracker: new ElementTracker(m, element, thresholdX, thresholdY)\n\t\t\t};\n\t\t\tbindingsMap.push(binding);\n\t\t\treturn binding.tracker;\n\t\t};\n\t\t\n\t\tm.unbind = function (tracker) {\n\t\t\tbindingsMap.forEach(function (binding, index) {\n\t\t\t\tif (binding.tracker === tracker) {\n\t\t\t\t\tbinding.tracker.$destroyDispatch();\n\t\t\t\t\tbindingsMap.splice(index, 1);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\t\n\t\tm.destroy = function () {\n\t\t\t$el.off(\"scroll.\"+m.id, updateScrollData);\n\t\t\t$window.off(\"resize.\"+m.id, updateScrollData);\n\t\t\tm.$destroyDispatch();\n\t\t\tbindingsMap = null;\n\t\t\tm.bind = function () { throw \"This monitor has been destroyed.\"; };\n\t\t};\n\n\t\t$el.on(\"scroll.\"+m.id, updateScrollData);\n\t\t$window.on(\"resize.\"+m.id, updateScrollData);\n\t\tupdateScrollData({});\n\t}\n\t\n\tScrollMonitor.prototype = {\n\t\tgetOffset: function ($el) { \n\t\t\treturn (($el.css(\"position\")===\"fixed\"? $el.scrollTop() : $el.offset().top)) + $el.height(); \n\t\t},\n\t\tscrollTo: function (element, speed, offset, before, after) {\n\t\t\tvar sp = speed || 400\n\t\t\t\t, _o = (typeof(offset)==\"number\")? offset : 0;\n\t\t\tif (!_o && offset && offset.jquery) _o = this.getOffset(offset);\n\t\t\tif (typeof(element)!==\"number\") element = $(element).offset().top;\n\t\t\tif (before) before();\n\t\t\t$htmlBody.animate( { scrollTop: element - _o }, sp ).promise().done(after);\n\t\t}\n\t};\t\n\t\n\treturn ScrollMonitor;\n})(jQuery || Zepto, require(\"./makeEventDispatch.js\"));\n\nif (typeof module !== 'undefined' && module.exports) module.exports = ScrollMonitor;\nelse if (typeof define == 'function' && define.amd) define(function(){ return ScrollMonitor; });\n","/** @class BreakpointMonitor\n *\n * @param {Array} breakpoints object literals {name: screenWidth}\n * @param {Element} DOM element to keep annotated with breakpoint classes\n *\n * @fires breakpointMonitor#viewportBreakpointChanged - Event contains: newBreakpoint {String}, oldBreakpoint {String}\n *\n * @example\n \t\t`breakpointMonitor = new BreakpointManger({mobile: 400, desktop: 1200}, <element>);`\n *\n * @returns a function which tracks and reports on the status of the viewport\n *\n * @method breakpointMonitor.breakpoint(operator<String>, breakpoint<String>);\n \t\t`var isDesktop = breakpointMonitor.breakpoint('>', 'mobile');`\n *\n * @requires $\n * @requires makeEventDispatch\n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n */\n\nvar BreakpointMonitor = (function ($, makeEventDispatch) {\n\tvar $window = $(window);\n\t\n\tfunction testThreshold(breakpoints, operator, breakpointName) {\n\t\tvar w = window.innerWidth || window.clientWidth\n\t\t\t, t = typeof breakpointName == \"string\"? breakpointName : false;\n\n\t\tif (!(t && breakpoints[t])) return false;\n\t\telse t = breakpoints[t];\n\n\t\tif (operator === \">\") return w > t[1];\n\t\tif (operator === \"<\") return w < t[0];\n\t\tif (operator === \">=\") return w >= t[0];\n\t\tif (operator === \"<=\") return w <= t[1];\n\t\telse return (w >= t[0] && w <= t[1]);\n\t}\n\t\n\tfunction annotateElement($element, breakpoint, breakpoints, lastBreakpointClassString) {\n\t\tvar classes = \"\";\n\t\t$element.removeClass(lastBreakpointClassString);\n\t\t$element.addClass(\"viewport-\"+breakpoint);\n\t\tfor (var t in breakpoints) classes += \" viewport-\"+t;\n\t\treturn classes;\n\t}\n\t\n\t\n\tfunction BreakpointMonitor(breakpoints, element) {\n\t\tvar m = makeEventDispatch(this)\n\t\t\t,\tlastBreakpointClassString = \"\";\n\t\t\n\t\tfunction resizeHandler() {\n\t\t\tvar classString = \"\"\n\t\t\t\t, oldBreakpoint = m.currentBreakpoint\n\t\t\t\t, newBreakpoint;\n\t\t\t\n\t\t\tfor (var t in m.breakpoints) {\n\t\t\t\tif (testThreshold(m.breakpoints, '=', t)) newBreakpoint = t;\n\t\t\t}\n\t\t\t\n\t\t\tif (newBreakpoint && newBreakpoint !== oldBreakpoint) {\n\t\t\t\tm.currentBreakpoint = newBreakpoint;\n\t\t\t\t\n\t\t\t\tif (m.$element)\n\t\t\t\t\tlastBreakpointClassString = annotateElement(\n\t\t\t\t\t\tm.$element, newBreakpoint, m.breakpoints, lastBreakpointClassString\n\t\t\t\t\t);\n\t\t\t\t\n\t\t\t\tm.$trigger({\n\t\t\t\t\ttype: \"viewportBreakpointChanged\",\n\t\t\t\t\tnewBreakpoint: newBreakpoint,\n\t\t\t\t\toldBreakpoint: oldBreakpoint\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis.breakpoints = breakpoints;\n\t\tif (element) this.$element = element.addClass? element : $(element);\n\t\t\n\t\t/** @method breakpointMonitor.breakpoint(operator<String>, breakpoint<String>);\n\t\t * \t@description Check if the current viewport size is equal to or less/more than one of configured breakpoints \n\t\t * \t@param operator {string} \"more/less than\" or \"equals\"\n\t\t * \t@param breakpoint {string} name of target breakpoint\n\t\t * \t@returns boolean, or name of current breakpoint with no arguments\n\t\t */\n\t\tthis.breakpoint = function (operator, breakpointName) {\n\t\t\tif (!operator && breakpointName) return breakpointName === breakpointName;\n\t\t\treturn breakpointName? testThreshold(m.breakpoints, operator, breakpointName) : m.currentBreakpoint;\n\t\t};\n\t\tthis.refresh = resizeHandler;\n\t\tthis.destroy = function () {\n\t\t\t$window.off('resize', resizeHandler);\n\t\t\tm.$destroyDispatch();\n\t\t};\n\n\t\t$window.on('resize', resizeHandler);\n\t\tthis.refresh();\n\t}\n\n\treturn BreakpointMonitor;\n})(jQuery || Zepto, require(\"./makeEventDispatch.js\"));\n\nif (typeof module !== 'undefined' && module.exports) module.exports = BreakpointMonitor;\nif (typeof define == 'function' && define.amd) define(function(){ return BreakpointMonitor; });","/** @class TransitionMonitor\n * @description dispatches normalised transition/animation start/end end events.\n \t\tProvides utilites for manipulating element and waiting for tranition/animation with promise.\n\t\tIf no event fired or no transition capability present, promise is rejected after maxDuration.\n *\n * @param {Element} DOM element to monitor for animations/transitions\n * @param {Object} options object: {maxDuration: timeToWaitForEvent}\n *\n * @fires transitionMonitor#transitionStart - Event contains: {originalEvent: {Object} original event}\n * @fires transitionMonitor#transitionEnd - Event contains: {originalEvent: {Object} original event}\n * @fires transitionMonitor#animationStart - Event contains: {originalEvent: {Object} original event}\n * @fires transitionMonitor#animationEnd - Event contains: {originalEvent: {Object} original event}\n *\n * @example\n \t\t`var monitor = new TransitionMonitor(<element>, {maxDuration: 400});\n\t\t var animationPromise = monitor.addClass(\"fadeIn\", \"animationEnd\", 300).then(someThing);`\n *\n * @returns a function which tracks and reports on the transitions of element\n *\n * @method breakpointMonitor.manipulate(\n \t\t\tmanipulation<string>, className<string>, type<string>, timeout<number>\n \t\t);`\n *\n * @requires $\n * @requires Promise\n * @requires $browser\n * @requires makeEventDispatch\n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n */\n\nvar TransitionMonitor = (function ($, Promise, $browser, makeEventDispatch, util) {\n\t\n\tvar TRANSITIONEVENT = $browser.transitions, \n\t\tANIMATIONEVENT = $browser.animations;\n\t\n\tfunction TransitionMonitor(element, options) {\n\t\tvar tm = makeEventDispatch(this);\n\t\ttm.element = $(element);\n\t\ttm.options = util.objectAssign({}, TransitionMonitor.prototype.options, options);\n\t\t\n\t\ttm.element.on(TRANSITIONEVENT.start, triggerTS);\n\t\ttm.element.on(TRANSITIONEVENT.end, triggerTE);\n\t\ttm.element.on(ANIMATIONEVENT.start, triggerAS);\n\t\ttm.element.on(ANIMATIONEVENT.end, triggerAE);\n\t\t\n\t\ttm.destroy = function () {\n\t\t\ttm.element.off(TRANSITIONEVENT.start, triggerTS);\n\t\t\ttm.element.off(TRANSITIONEVENT.end, triggerTE);\n\t\t\ttm.element.off(ANIMATIONEVENT.start, triggerAS);\n\t\t\ttm.element.off(ANIMATIONEVENT.end, triggerAE);\n\t\t\ttm.$destroyDispatch();\n\t\t}\n\t\t\n\t\tfunction tmEvnt(t, e) { return {type: t, originalEvent: e} }\n\t\tfunction isElement(e) { return e && (e.target || e.srcElement || e.originalTarget) === tm.element[0] }\n\t\tfunction triggerTS(e) { isElement(e) && tm.$trigger(tmEvnt(\"transitionStart\", e)) }\n\t\tfunction triggerTE(e) { isElement(e) && tm.$trigger(tmEvnt(\"transitionEnd\", e)) }\t\t\n\t\tfunction triggerAS(e) { isElement(e) && tm.$trigger(tmEvnt(\"animationStart\", e)) }\n\t\tfunction triggerAE(e) { isElement(e) && tm.$trigger(tmEvnt(\"animationEnd\", e)) }\n\t}\n\t\n\tTransitionMonitor.prototype = {\n\t\toptions: {\n\t\t\tmaxDuration: 3000\t\t// Set timeout in case of failure\n\t\t},\n\t\taddClass: function (className, type, timeout) {\n\t\t\treturn this.manipulate(\"addClass\", className, type, timeout)\n\t\t},\n\t\tremoveClass: function (className, type, timeout) {\n\t\t\treturn this.manipulate(\"removeClass\", className, type, timeout)\n\t\t},\n\t\ttoggleClass: function (className, type, timeout) {\n\t\t\treturn this.manipulate(\"toggleClass\", className, type, timeout)\n\t\t},\n\t\tmanipulate: function (manipulation, className, type, timeout) {\n\t\t\tvar tm = this;\n\t\t\tif (typeof timeout !== \"number\") timeout = tm.options.maxDuration;\n\t\t\t\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar fail = setTimeout(function () { reject(new Error(\"Transition not detected in time...\")) }, timeout),\n\t\t\t\t\tended = false;\n\t\t\t\tfunction resolvePromise(e) {\n\t\t\t\t\tif (ended) return;\n\t\t\t\t\telse ended = true;\n\t\t\t\t\tclearTimeout(fail);\n\t\t\t\t\tresolve(e);\n\t\t\t\t};\n\t\t\t\ttm.$once(type? type : \"transitionEnd\", resolvePromise);\n\t\t\t\tif (!type) tm.$once(\"animationEnd\", resolvePromise);\n\t\t\t\ttm.element[manipulation](className);\n\t\t\t});\n\t\t}\n\t};\n\t\n\treturn TransitionMonitor;\n\t\n})(jQuery || Zepto, require(\"./pLitr.js\"), require(\"./browsxr.js\"), require(\"./makeEventDispatch.js\"), require(\"../utilities/Util.js\"));\n\nif (typeof module !== 'undefined' && module.exports) module.exports = TransitionMonitor;\nelse if (typeof define == 'function' && define.amd) define(function(){ return TransitionMonitor; });","/** @class GestureMonitor\n * @description analyses touch events and dispatches swipe events.\n *\n * @param {Element} DOM element to monitor for gestures\n * @param {Object} options object defaults: {\n\t\t\t\t\t\tswipeThreshold: 100,\t\t\t\t// Distance moved before a swipe event can be triggered\n\t\t\t\t\t\ttapThreshold: 150,       \t\t// range of time where a tap event could be detected\n\t\t\t\t\t\tdbltapThreshold: 200,    \t\t// delay needed to detect a double tap\n\t\t\t\t\t\ttapPrecision: 60 / 2,    \t\t// touch events boundaries ( 60px by default )\n\t\t\t\t\t\tjustTouchEvents: false\t\t\t// Disable emulating swipe for mouse\n\t\t\t\t\t}\n *\n * @fires gestureMonitor#swipeUp - Event contains swipe data: {\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toriginalEvent: {Object} touchend event\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n * @fires gestureMonitor#swipeDown - Event contains swipe data\n * @fires gestureMonitor#swipeLeft - Event contains swipe data\n * @fires gestureMonitor#swipeRight - Event contains swipe data\n *\n * @example\n \t\t`var monitor = new GestureMonitor(<element>, {justTouchEvents: true});\n\t\t monitor.$on(\"swipeLeft\", function doSwipeLeftThing() {...});`\n *\n * @method gestureMonitor.destroy remove the monitor\n *\n * @requires $\n * @requires makeEventDispatch\n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n */\n\nvar GestureMonitor = (function ($, makeEventDispatch, util) {  \n  var msPointerEnabled = !!(navigator.msPointerEnabled)\n  \t, pointerEnabled = !!(msPointerEnabled || navigator.pointerEnabled)\n\t\t, msEventType = function (type) { return msPointerEnabled ? 'MS' + type : type.toLowerCase() }\n\t\t, HASTOUCH = pointerEnabled || (!!('ontouchstart' in window) && navigator.userAgent.indexOf('PhantomJS') < 0)\n\t\t,\tTOUCHEVENTS = {\n\t\t\t\ttouchstart: msEventType('PointerDown') + ' touchstart',\n\t\t\t\ttouchend: msEventType('PointerUp') + ' touchend',\n\t\t\t\ttouchmove: msEventType('PointerMove') + ' touchmove'\n      }\n\t\t, OPTIONS = {\n        swipeThreshold: 100,\t\t\t\t// Distance moved before a swipe event can be triggered\n        tapThreshold: 150,       \t\t// range of time where a tap event could be detected\n        dbltapThreshold: 200,    \t\t// delay needed to detect a double tap\n        tapPrecision: 60 / 2,    \t\t// touch events boundaries ( 60px by default )\n        justTouchEvents: false\t\t\t// Disable emulating swipe for mouse\n      };\n\t\n\tfunction getPointerEvent(event) { return event.targetTouches? event.targetTouches[0] : event; }\n\tfunction newTimestamp() { return new Date().getTime(); }\n\tfunction setListener(elm, events, callback) {\n\t\tvar eventsArray = events.split(' ')\n\t\t\t, i = eventsArray.length;\n\t\twhile (i--) \n\t\t\telm.addEventListener(eventsArray[i], callback, false);\n\t}\n  \n\t\n  function SwipeMonitor(element, opt) {\n    var m = makeEventDispatch(this)\n\t\t\t, options = util.objectAssign({}, OPTIONS, opt||{})\n      , tapNum = 0\n\t\t\t, currX, currY, cachedX, cachedY, tapTimer, timestamp, target;\n\t\t\n   if(!document.addEventListener) return this;\n\t\t\n\t\tm.element = $(element);\t\n\t\telement = m.element[0];\n\t\t\n\t\tfunction sendEvent(elm, eventName, originalEvent, data) {\n\t\t\tdata = data || {};\n\t\t\tdata.x = currX;\n\t\t\tdata.y = currY;\n\t\t\tdata.distance = data.distance;\n\t\t\t$(elm).trigger(eventName, data);\n\t\t\tm.$trigger(eventName, data);\n\t\t}\n\t\t\n\t\tfunction onTouchStart(e) {\n\t\t\tvar pointer = getPointerEvent(e);\n\t\t\tcachedX = currX = pointer.pageX;\n\t\t\tcachedY = currY = pointer.pageY;\n\t\t\ttimestamp = newTimestamp();\n\t\t\ttapNum++;\n\t\t}\n\t\t\n\t\tfunction onTouchEnd(e) {\n\t\t\tvar eventsArr = [],\n\t\t\t\tdeltaY = cachedY - currY,\n\t\t\t\tdeltaX = cachedX - currX;\n\n\t\t\tclearTimeout(tapTimer);      // clear the previous timer in case it was set\n\n\t\t\tif(deltaX <= -options.swipeThreshold) eventsArr.push('swipeRight');\n\t\t\tif(deltaX >= options.swipeThreshold) eventsArr.push('swipeLeft');\n\t\t\tif(deltaY <= -options.swipeThreshold) eventsArr.push('swipeDown');\n\t\t\tif(deltaY >= options.swipeThreshold) eventsArr.push('swipeUp');\n\n\t\t\tif(eventsArr.length) {\n\t\t\t\tfor(var i = 0, eventName; i < eventsArr.length; i++){\n\t\t\t\t\teventName = eventsArr[i];\n\t\t\t\t\tsendEvent(e.target, eventName, e, {\n\t\t\t\t\t\tdistance: {\n\t\t\t\t\t\t\tx: Math.abs(deltaX),\n\t\t\t\t\t\t\ty: Math.abs(deltaY)\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif(\n\t\t\t\t\t(timestamp + options.tapThreshold) - newTimestamp() >= 0 &&\n\t\t\t\t\tcachedX >= currX - options.tapPrecision &&\n\t\t\t\t\tcachedX <= currX + options.tapPrecision &&\n\t\t\t\t\tcachedY >= currY - options.tapPrecision &&\n\t\t\t\t\tcachedY <= currY + options.tapPrecision\n\t\t\t\t) {          \n\t\t\t\t\t// Here you get the Tap event\n\t\t\t\t\tsendEvent(e.target, (tapNum === 2) && (target === e.target) ? 'dbltap' : 'tap', e);\n\t\t\t\t\ttarget = e.target;\n\t\t\t\t}\n\n\t\t\t\t// reset the tap counter\n\t\t\t\ttapTimer = setTimeout(function(){ tapNum = 0 }, options.dbltapThreshold);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction onTouchMove(e) {\n\t\t\tvar pointer = getPointerEvent(e);\n\t\t\tcurrX = pointer.pageX;\n\t\t\tcurrY = pointer.pageY;\n\t\t}\n    \n    setListener(element, TOUCHEVENTS.touchstart + (options.justTouchEvents ? '' : ' mousedown'), onTouchStart);\n    setListener(element, TOUCHEVENTS.touchend + (options.justTouchEvents ? '' : ' mouseup'), onTouchEnd);\n    setListener(element, TOUCHEVENTS.touchmove + (options.justTouchEvents ? '' : ' mousemove'), onTouchMove);\n  }\n\t\n\t\n//  $.fn['gestureMonitor'] = function(opt){\n//    return this.each(function(index, element){\n//      $.data( this, 'gestureMonitor', new SwipeMonitor(element, opt) );\n//    });\n//  };\n\n\t\n\treturn SwipeMonitor;\n})(jQuery || Zepto, require(\"./makeEventDispatch.js\"), require(\"../utilities/Util.js\"));\n\nif (typeof module !== 'undefined' && module.exports) module.exports = GestureMonitor;\nif (typeof define == 'function' && define.amd) define(function(){ return GestureMonitor; });","/** \n * @method viewUpdater\n * @description Load a view from a remote source and replace a target view with it's content, \n * resolving a promise when done.\n *\n * @example \n\t\t`var updateTarget = viewUpdater($app, $scope, $element, $target);\n\t\t$(window).on('popstate', function(event) {\n\t\t\tupdateTarget({\n\t\t\t\tstate: event.originalEvent.state, \n\t\t\t\ttitle: event.originalEvent.state.title, \n\t\t\t\turl: (window.location.pathname+window.location.search)\n\t\t\t}, {\n\t\t\t\tmainView: $target.selector,\n\t\t\t\tscrollTo: true,\n\t\t\t\tcssTransitions: true,\n\t\t\t\trequestMethod: 'GET',\n\t\t\t\trequestHeaders: undefined,\n\t\t\t\tloadingClass: 'view-loading',\n\t\t\t\ttargetLoadingClass: 'ajax-loading',\n\t\t\t\terrorPage: '/404',\n\t\t\t\tonServerError: function (e, request) { alert('Server Error.') }\n\t\t\t})\n\t\t\t.then(function ($newTargetScope) { ... });\n\t\t})`\n *\n * @returns Promise\n * @requires $scope<Scope>\n * @requires $app<ARENA>\n * @requires $element<HTMLElement>\n * @requires $target<HTMLElement>\n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n */\n\nfunction viewUpdater ($app, $scope, $element, $target) {\n\treturn function updateTarget(request, data) {\n\t\tvar useCssTransitions = data.cssTransitions && $app.$browser.transitions,\n\t\t\ttransitionInClass = data.targetLoadingClass+'-transition-in',\n\t\t\ttransitionOutClass = data.targetLoadingClass+'-transition-out',\n\t\t\tmonitor;\n\n\t\t$scope.$broadcast({\n\t\t\ttype: '$viewLoading', \n\t\t\trequest: request\n\t\t});\n\t\t\n\t\tif (!useCssTransitions || $target.hasClass(transitionOutClass)) return htmlUpdate();\n\t\t\n\t\t$element.addClass(data.loadingClass);\n\t\tmonitor = new $app.TransitionMonitor($target.removeClass(transitionInClass));\n\t\t\n\t\tfunction httpSuccess(response) {\t\n\t\t\t$scope.$broadcast({\n\t\t\t\ttype: '$viewLoaded',\n\t\t\t\trequest: request,\n\t\t\t\tresponse: response\n\t\t\t});\n\n\t\t\tvar $replacement = $app.$(response.data.targetHtml).addClass(data.targetLoadingClass);\n\t\t\t$scope.$broadcast({\n\t\t\t\ttype: '$viewExit',\n\t\t\t\t$target: $target,\n\t\t\t\t$replacement: $replacement\n\t\t\t});\n\t\t\t$target.triggerHandler('$destroy');\n\n\t\t\tif ($app.isFunction(data.scrollTo)) \n\t\t\t\tdata.scrollTo($target) && $app.$scrollMonitor.scrollTo($target, 0);\n\t\t\telse if (data.scrollTo) \n\t\t\t\twindow.scrollTo($target.offset().top, $target.offset().left);\n\n\t\t\t$replacement.insertBefore($target);\n\t\t\t$target.remove();\n\n\t\t\treturn $app.$compiler\n\t\t\t\t.compile($replacement[0], null, true)\n\t\t\t\t.then(function ($targetScope) {\n\t\t\t\t\t$target = $replacement;\n\t\t\t\t\t$element.removeClass(data.loadingClass);\n\t\t\t\t\t$scope.$broadcast({\n\t\t\t\t\t\ttype: '$viewEnter',\n\t\t\t\t\t\t$target: $replacement\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif (!useCssTransitions) {\n\t\t\t\t\t\t$replacement.removeClass(data.targetLoadingClass);\n\t\t\t\t\t\treturn $targetScope;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn new $app.Promise(function (resolve) {\n\t\t\t\t\t\t\tmonitor = new $app.TransitionMonitor($replacement);\n\t\t\t\t\t\t\t$app.requestAnimationFrame(function () {\n\t\t\t\t\t\t\t\tvar endUpdate = function () {\n\t\t\t\t\t\t\t\t\tmonitor.destroy();\n\t\t\t\t\t\t\t\t\t$replacement.removeClass(data.targetLoadingClass);\n\t\t\t\t\t\t\t\t\tresolve($targetScope);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmonitor.addClass(transitionInClass).then(endUpdate).catch(endUpdate);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\tfunction httpError(e) { \n\t\t\tif (404===e.status) {\n\t\t\t\tif (request.url.indexOf(data.errorPage) < 0) {\n\t\t\t\t\treturn updateTarget({\n\t\t\t\t\t\tstate: {targetElement: data.mainView}, \n\t\t\t\t\t\ttitle: request.state.title, \n\t\t\t\t\t\turl: data.errorPage,\n\t\t\t\t\t\tredirectedUrl: request.url\n\t\t\t\t\t}, data);\n\t\t\t\t} else {\n\t\t\t\t\talert('The path '+ (request.redirectedUrl || request.url) +' could not be found...');\n\t\t\t\t}\n\t\t\t} else if(500===e.status && data.onServerError) {\n\t\t\t\tdata.onServerError(e, request);\n\t\t\t}\n\t\t\tconsole.error(\"Http error: \", e);\n\t\t\t$scope.$broadcast({\n\t\t\t\ttype: '$viewEnter',\n\t\t\t\terror: e\n\t\t\t});\n\t\t\t$target.removeClass(transitionOutClass).addClass(transitionInClass);\n\t\t\t$element.removeClass(data.loadingClass);\n\t\t}\n\n\t\tfunction htmlUpdate() {\n\t\t\tmonitor && monitor.destroy();\n\t\t\treturn $app.$provider.service(\"$router\").http(request).then(httpSuccess).catch(httpError);\n\t\t}\n\n\t\treturn monitor.addClass(transitionOutClass).then(htmlUpdate).catch(htmlUpdate);\n\t}\n}\n\nif (typeof module !== 'undefined' && module.exports) module.exports = viewUpdater;\nelse if (typeof define == 'function' && define.amd) define(function(){ return viewUpdater });","/** \n * @method loadImgSrc\n * @description Load an image, resolving a promise when done.\n *\n * @example \n \t\t`loadImgSrc(\"an/image/url.png\").then(doSomeThing)`\n *\n * @returns Promise\n * @requires Promise\n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n */\n\nvar loadImgSrc = (function(Promise){\n\t\n\treturn function (src) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tvar image = new Image();\t\t\n\t\t\timage.onload = resolve;\n\t\t\timage.onerror = reject;\n  \t\timage.src = src;\n\t\t\tif (image.complete && image.naturalWidth) \n\t\t\t\tresolve(); \t\t\t//Hack for browsers that don't trigger load event for cached content\n\t\t});\n\t};\n\t\n})(require(\"./pLitr\"));\n\nif (typeof module !== 'undefined' && module.exports) module.exports = loadImgSrc;\nelse if (typeof define == 'function' && define.amd) define(function(){ return loadImgSrc; });","/** \n * @class RouterService\n * @description Using window.location and window.history,\n * \tserves as router and a URL/Location/History api. \n *\n * @fires $app#$routeChange \n * \t\t\t\t- {request: {requesteObject}}\n *\t\t\t\t- when new route changed\n * @fires $app#$routeChange.start \n * \t\t\t\t- {request: {requesteObject}, response: {responseObject}}\n *\t\t\t\t- when route is about to be changed by http request\n * @fires $app#$routeChange.end \n * \t\t\t\t- {request: {requesteObject}[, response: {responseObject} | error: {errorObject}]} \n *\t\t\t\t- when route has been changed by a http request\n * \n * @example\n\t\t`$router.blacklist('/a/path');\t\t\t\t// \"/a/path\" will be ignored\n\t\t $('a').on('click', function (e) {\n\t\t \t\tvar path = this.href;\n\t\t\t\tif ($router.isValidRoute(path)) {\t// False if path starts with \"/a/path\"\n\t\t\t\t\tvar request = {\n\t\t\t\t\t\t url: path,\n\t\t\t\t\t\t state: {\n\t\t\t\t\t\t\t targetElement: '[main-view]';\n\t\t\t\t\t\t\t method: \"GET\";\n\t\t\t\t\t\t\t data: {g: 'thang'}\n\t\t\t\t\t\t }\n\t\t\t\t\t };\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t$router.navigate({url: path});\n\t\t\t\t\t$router.get(request)\n\t\t\t\t\t .then(function (response) {\n\t\t\t\t\t\t $(request.state.targetElement).replaceWith(response.data.targetHtml);\n\t\t\t\t\t });\n\t\t\t\t}\n\t\t });`\n *\n * @requires $<jQuery>\n * @requires $app<ARENA>\n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n */\n\nfunction routerProvider($, $app) {\n\t\n\tfunction RouterService() {\n\t\tvar router = this, \n\t\t\t_blacklist_ = [];\n\t\trouter.base = \"/\";\n\t\trouter.isInternalRoute = function (path) {\n\t\t\treturn path.substring(0, router.base.length) === router.base\n\t\t\t\t\t|| path.indexOf(':') === -1;\n\t\t};\n\t\trouter.isValidRoute = function (path) {\n\t\t\tif (!router.isInternalRoute(path)) return false;\n\t\t\tfor (var l = _blacklist_.length, i = (path === router.base) ? l + 1 : 0; i < l; i++)\n\t\t\t\tif (path.indexOf(_blacklist_[i]) === 0) return false;\n\t\t\treturn true;\n\t\t};\n\t\trouter.blacklist = function (paths) { \n\t\t\tif (Array.isArray(paths)) _blacklist_ = _blacklist_.concat(paths);\n\t\t\telse _blacklist_.push(paths);\n\t\t};\n\t}\n\t\n\tRouterService.prototype.evalHtmlResponse = function (html, targetSelector, skipSanitization) {\n\t\tvar data = {html: html};\n\t\tif (!skipSanitization) data.sanitizedHtml = getDocumentHtml(html, true);\n\t\tvar $html = $('<div>'+ (data.sanitizedHtml || html) +'</div>');\n\t\tdata.metaData = getDocumentMeta($html);\n\t\tdata.targetHtml = $html.find(targetSelector).get(0);\n\t\tdata.scripts = getDocumentScript(html);\n\t\t$html = null;\n\t\treturn data;\n\t};\n\t\n\tRouterService.prototype.navigate = function (request) {\n\t\t$app.$trigger({type: '$routeChange', request: request});\n\t\t\n\t\tif (!$app.$browser.historyAPI || !$app.$config.html5Mode)\n\t\t\treturn window.location.href = request.url;\n\n\t\twindow.history.pushState(request.state, request.title, request.url);\t\n\t\trequest.title && $app.updatePageTitle(request.title);\n\t};\n\t\n\tRouterService.prototype.ajax = function (request) {\n\t\treturn new $app.Promise(function (resolve, reject) {\n\t\t\t$.ajax({\n\t\t\t\turl: request.url,\n\t\t\t\tdata: request.data,\n\t\t\t\ttype: request.method,\n\t\t\t\theaders: request.headers,\n\t\t\t\tsuccess: function (data, textStatus, jqXHR) {\n\t\t\t\t\tresolve({\n\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\trequest: request,\n\t\t\t\t\t\ttextStatus: textStatus,\n\t\t\t\t\t\tjqXHR: jqXHR\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\terror: function (jqXHR, textStatus, errorThrown) {\n\t\t\t\t\treject(jqXHR);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n\t\n\tRouterService.prototype.http = function (request) {\n\t\tvar router = this;\n\t\t\n\t\tif (request.changeAppRoute) {\n\t\t\t$app.$trigger({type: '$routeChange.start', request: request});\n\t\t\trouter.navigate(request);\n\t\t}\n\t\t\n\t\tfunction onSuccess(response) {\n\t\t\tif (request.state.targetElement) {\n\t\t\t\tvar dataEval = router.evalHtmlResponse(response.data, request.state.targetElement);\n\t\t\t\tif (!dataEval.targetHtml) {\n\t\t\t\t\tvar e = new Error('The target html \"'+request.state.targetElement+'\" was not found.');\n\t\t\t\t\te.status = 500;\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t\tresponse.data = dataEval;\n\t\t\t\tif (!request.title && dataEval.metaData && dataEval.metaData.title)\n\t\t\t\t\t$app.updatePageTitle(dataEval.metaData.title);\n\t\t\t}\n\t\t\tif (request.changeAppRoute)\n\t\t\t\t$app.$trigger({type: '$routeChange.end', request: request, response: response});\n\t\t\treturn response;\n\t\t}\n\t\tfunction onError(error) {\n\t\t\tif (request.changeAppRoute)\n\t\t\t\t$app.$trigger({type: '$routeChange.end', request: request, error: error});\n\t\t\treturn $app.Promise.reject(error);\n\t\t}\n\n\t\treturn router.ajax(request).then(onSuccess).catch(onError);;\n\t};\n\t\n\treturn new RouterService();\n}\nrouterProvider.$dependencies = [\"$\", \"$app\"];\n\n\nfunction getDocumentScript(_html_) { \n\treturn _html_.match(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi) \n}\n\nfunction getDocumentMeta($html) {\n\treturn {\n\t\ttitle: decodeURI($html.find('.document-title:first').text()||\"\")\n\t};\t// TODO: get more meta...\n}\n\nfunction getDocumentHtml(html, sanitize) {\n\tvar result = String(html);\n\tif (!result.length) return;\n\tif (sanitize) {\n\t\tif (-1 === result.indexOf('<html')) {\n\t\t\tresult = '<html><head></head><body>' + result + '</body></html>';\n\t\t}\n\t\tresult = result.replace(/<\\!DOCTYPE[^>]*>/i, '')\n\t\t\t.replace(/<(html|head|body|title|meta|link)([\\s\\>])/gi, '<div class=\"document-$1\"$2')\n\t\t\t.replace(/<\\/(html|head|body|title|meta|link)\\>/gi, '</div>')\n\t\t\t.replace(/<script/gi, ' <!-- <script')\n\t\t\t.replace(/\\/script>/gi, '/script> --> ');\n\t}\n\treturn result.trim();\n}\n\nif (typeof module !== 'undefined' && module.exports) module.exports = routerProvider;","/** \n * @class controller\n * @constructs directive\n * @description Create scope and instantiate a controller. Optionally attach to scope.\n *  \n * @param {String} controller name of controller (Controller must be provided to app);\n * @param {String} controllerAs name of variable to add to scope as controller;\n *\n * @example \n\t\t`<body>\n\t\t\t\t<header data-controller=\"headerController\" controller-as=\"cx\">\n\t\t\t\t\t<button on-interaction=\"click\" execute-on-scope=\"cx.clickFn\" />\n\t\t\t\t</header>\n\t\t\t\t<div>\n\t\t\t\t\t// ...\n\t\t\t\t</div>\n\t\t\t\t<footer />\n\t\t </body>`\n *\n * @requires $app<ARENA>\n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n */\n\t\nfunction controllerDirective($app) {\n\treturn {\n    scope: true,\n\t\tdata: {\n\t\t\tcontroller: undefined,\n\t\t\tcontrollerAs: undefined,\n\t\t},\n    link: function ($element, $scope, data) {\n\t\t\tvar contoller;\n\t\t\tif ($app.isFunction(data.controller)) {\n\t\t\t\tcontoller = $app.$provider.instantiate(data.controller, {$scope: $scope});\n\t\t\t} else if ($app.isString(data.controller)) {\n\t\t\t\tcontoller = $app.$provider.controller(data.controller, null, {$scope: $scope});\n\t\t\t}\n\t\t\tif (contoller && $app.isString(data.controllerAs)) \n\t\t\t\t$scope[data.controllerAs] = contoller;\t\t\n    }\n  };\n}\ncontrollerDirective.$dependencies = [\"$app\"];\n\nif (typeof module !== 'undefined' && module.exports) module.exports = controllerDirective;","/** \n * @class MainView\n * @constructs directive\n * @description Use ajax to update part of your page. \n *    When Links are clicked within the linked element, a new route is requested with \n * \t\tthe target being main-view target.\n *    When route has been resolved, main-view target is replaced.\n *\t\tThe mainView target should have a scope so it can be safely $destroyed without \n * \t\tleaving behind orphaned scopes; if it does not, one will be created.\n *    and compiled with that of the page at new route. \n *\t\tThe page must contain an element matching the main-view target selector.\n *    The http GET response must contain an element matching the main-view target selector.\n *\n * @param {String} mainView Target element selector. Default: \"body\";\n * @param {Boolean} changeAppRoute Allow $app to change route when updating target content. Default: true;\n * @param {Boolean | Function} scrollTo Scroll to target on update. Default: true;\n * @param {String} linkSelector Only matching links will trigger update. Default: 'a,[ajax-href]';\n * @param {String} linkFilter Matching links will not trigger update. Default: '.ajax-ignore';\n * @param {String} loadingClass Class added to linked element during update. Default: 'view-loading';\n * @param {String} targetLoadingClass Class added to target (and replacement) during update. Default: 'ajax-loading';\n *\n * @fires $scope#$viewLoading - {request: {requesteObject}}\n *\t\t\t\t\t\t- $broadcasted when new route requested with this target\n * @fires $scope#$viewLoaded - {request: {requesteObject}, response: {responseObject}}\n *\t\t\t\t\t\t- $broadcasted when new route resolved with this target\n * @fires $scope#$viewExit - {$target: {Element}[, $replacement: {Element}]} \n *\t\t\t\t\t\t- $broadcasted when view about to be replaced\n * @fires $scope#$viewEnter - {$target: {Element}}\n *\t\t\t\t\t\t- $broadcasted when view has been replaced\n * \n * @example \n\t\t`<body main-view=\"#target\">\t//Links in here will update #target\n\t\t\t\t<header>\n\t\t\t\t\t<nav />\n\t\t\t\t</header>\n\n\t\t\t\t<main id=\"target\" controller=\"view-controller\">\n\t\t\t\t\t// This content updated via xhr\n\t\t\t\t\t<section other-view=\"[other-view]\">\n\t\t\t\t\t\t// This content also updated via xhr but controlled separately\n\t\t\t\t\t</section>\n\t\t\t\t</main>\n\n\t\t\t\t<footer />\n\t\t \n\t\t\t\t<script>\n\t\t\t\t\tvar APP = new ARENA('YOUR APP');\n\t\t\t\t\tAPP.$provider.alias('mainView', 'otherView', function (directive) {\n\t\t\t\t\t\tvar data = directive.data;\n\t\t\t\t\t\tdirective.data = function ($element) {\n\t\t\t\t\t\t\treturn Object.assign({}, data, {mainView: $element.data('other-view')});\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn directive;\n\t\t\t\t\t});\n\t\t\t\t</script>\n\t\t </body>`\n *\n * @requires $<jQuery>\n * @requires $app\n * @requires $router\n *\n * @author Nathan Johnson <professionalnathan@gmail.com>\n */\t\n\t\nfunction mainViewDirective($, $app, $router, $window, $rootElement) {\n\tvar ROOT_VIEW, \n\t\t\tACTIVE_VIEWS = {};\n\treturn {\n    scope: true,\n\t\tdata: {\n\t\t\tmainView: 'body',\n\t\t\tscrollTo: true,\n\t\t\tcssTransitions: false,\n\t\t\tchangeAppRoute: true,\n\t\t\tlinkSelector: 'a,[ajax-href]',\n\t\t\tlinkFilter: '.ajax-ignore',\n\t\t\trequestMethod: 'GET',\n\t\t\trequestHeaders: undefined,\n\t\t\tloadingClass: 'view-loading',\n\t\t\ttargetLoadingClass: 'ajax-loading',\n\t\t\terrorPage: '/404',\n\t\t\tonServerError: function (e, request) {\n\t\t\t\tif (window.confirm(\"There has been a server error, do you want to reload the page?\"))\n\t\t\t\t\twindow.location.replace(request.url)\n\t\t\t}\n\t\t},\n    link: function ($element, $scope, data) {\n\t\t\tvar updateTarget, $target = $rootElement.find(data.mainView);\n\t\t\tif (!$target.length) return;\n\t\t\telse if (!$target.data(\"controller\")) $target.attr(\"controller\", 'mainViewTarget');\n\n\t\t\tif ($app.$browser.historyAPI && $app.$config.html5Mode && data.changeAppRoute) {\n\t\t\t\tupdateTarget = $app.viewUpdater($app, $scope, $element, $target);\n\t\t\t\tsetInitialState();\n\t\t\t\n\t\t\t\t$element.on(\"$compile.end\", function () {\n\t\t\t\t\t$window.on('popstate', handleStateChange);\n\t\t\t\t\t$element.on('click', data.linkSelector, handleClicks);\n\t\n\t\t\t\t\t$scope.$on(\"$destroy\", function () {\n\t\t\t\t\t\tif (ACTIVE_VIEWS[data.mainView]) ACTIVE_VIEWS[data.mainView] = undefined;\n\t\t\t\t\t\tif (ROOT_VIEW === data.mainView) ROOT_VIEW = undefined;\n\t\t\t\t\t\t$window.off('popstate', handleStateChange);\n\t\t\t\t\t\t$element.off('click', data.linkSelector, handleClicks);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction setInitialState() {\n\t\t\t\tACTIVE_VIEWS[data.mainView] = {triggerElement: $element};\n\t\t\t\tif (ROOT_VIEW && window.history.state && window.history.state.$$ARENA) return; \n\t\t\t\twindow.history.replaceState(buildStateObject({}, document.title), document.title, window.location.href);\n\t\t\t\tROOT_VIEW = data.mainView;\n\t\t\t}\t\n\n\t\t\tfunction buildStateObject(options, title) {\n\t\t\t\tvar state = {$$ARENA: $app.$config.name, title: title};\n\t\t\t\tstate.targetElement = options.targetElement || data.mainView;\n\t\t\t\tstate.method = options.requestMethod || data.requestMethod;\n\t\t\t\tstate.data = options.requestData || data.requestData;\n\t\t\t\tstate.headers = options.requestHeaders || data.requestHeaders;\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\t\n\t\t\tfunction handleClicks(event) {\n\t\t\t\tvar $this, clickData,\n\t\t\t\t\t\trequest = {changeAppRoute: data.changeAppRoute};\n\t\t\t\t\n\t\t\t\tif (event.which == 2 || event.metaKey || ($this = $(this)).is(data.linkFilter))\n\t\t\t\t\treturn true;\n\t\t\t\t\n\t\t\t\tclickData = $this.data();\n\t\t\t\t\n\t\t\t\trequest.url = $this.attr('href') || clickData.ajaxHref;\n\t\t\t\tif (request.url.indexOf(\"#\") === 0) return true;\t\n\t\t\t\tif (request.url == window.location.pathname) return false;\t\n\t\t\t\tif (!$router.isValidRoute(request.url)) return true;\t\n\t\t\t\t\n\t\t\t\tif ($app.isDefined(clickData.changeAppRoute)) \n\t\t\t\t\trequest.changeAppRoute = clickData.changeAppRoute;\t\n\t\t\t\t\n\t\t\t\tif ($app.isFunction(clickData.ajaxRequestCallback)) \n\t\t\t\t\trequest.callback = clickData.ajaxRequestCallback;\n\t\t\t\t\n\t\t\t\trequest.state = buildStateObject(clickData, request.title);\n\t\t\t\t\n\t\t\t\tif (request.changeAppRoute && !($app.$browser.historyAPI && $app.$config.html5Mode)) \n\t\t\t\t\treturn true;\n\t\t\t\t\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (ROOT_VIEW !== data.mainView) event.stopPropagation();\t\t//Only handle clicks once\n\t\t\t\tupdateTarget(request, data);\n\t\t\t}\n\t\t\t\n\t\t\tfunction handleStateChange(event) {\n\t\t\t\tif (!event.originalEvent.state) return;\n\t\t\t\tvar targetView = event.originalEvent.state.targetElement;\n\t\t\t\t\n\t\t\t\t//Root view must handle odd cases\n\t\t\t\tif (ROOT_VIEW === data.mainView && (!targetView || !ACTIVE_VIEWS[targetView] || !$(targetView).length))\n\t\t\t\t\t\ttargetView = event.originalEvent.state.targetElement = ROOT_VIEW;\n\t\t\t\t\n\t\t\t\tif (targetView === data.mainView) {\n\t\t\t\t\t\tupdateTarget({\n\t\t\t\t\t\t\tstate: event.originalEvent.state, \n\t\t\t\t\t\t\ttitle: event.originalEvent.state.title, \n\t\t\t\t\t\t\turl: (window.location.pathname+window.location.search)\n\t\t\t\t\t\t}, data);\n\t\t\t\t}\n\t\t\t}\t\n    }\n  }\n}\nmainViewDirective.$dependencies = [\"$\", \"$app\", \"$router\", \"$window\", \"$rootElement\"];\n\nif (typeof module !== 'undefined' && module.exports) module.exports = mainViewDirective;\n"],"sourceRoot":""}